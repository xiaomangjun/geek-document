<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>极客园M端</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/geek-document/hero.png">
    <meta name="description" content="极客园-开发文档">
    
    <link rel="preload" href="/geek-document/assets/css/0.styles.000c445f.css" as="style"><link rel="preload" href="/geek-document/assets/js/app.0842bb1d.js" as="script"><link rel="preload" href="/geek-document/assets/js/3.81450f90.js" as="script"><link rel="preload" href="/geek-document/assets/js/4.9f5882eb.js" as="script"><link rel="prefetch" href="/geek-document/assets/js/1.0ebaa0ee.js"><link rel="prefetch" href="/geek-document/assets/js/10.242f6eec.js"><link rel="prefetch" href="/geek-document/assets/js/11.88b8cf79.js"><link rel="prefetch" href="/geek-document/assets/js/5.32088d76.js"><link rel="prefetch" href="/geek-document/assets/js/6.7fcc8c77.js"><link rel="prefetch" href="/geek-document/assets/js/7.e04e3a94.js"><link rel="prefetch" href="/geek-document/assets/js/8.79b9c7de.js"><link rel="prefetch" href="/geek-document/assets/js/9.d475d67e.js">
    <link rel="stylesheet" href="/geek-document/assets/css/0.styles.000c445f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/geek-document/" class="home-link router-link-active"><img src="/geek-document/hero.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/geek-document/guide/01-pc.html" class="nav-link">
  PC端项目
</a></div><div class="nav-item"><a href="/geek-document/guide/02-vuex.html" class="nav-link">
  Vuex学习
</a></div><div class="nav-item"><a href="/geek-document/guide/03-mobile.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  M端项目
</a></div> <a href="https://gitee.com/xmangojun/" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/geek-document/guide/01-pc.html" class="nav-link">
  PC端项目
</a></div><div class="nav-item"><a href="/geek-document/guide/02-vuex.html" class="nav-link">
  Vuex学习
</a></div><div class="nav-item"><a href="/geek-document/guide/03-mobile.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  M端项目
</a></div> <a href="https://gitee.com/xmangojun/" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>极客园M端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/geek-document/guide/03-mobile.html#第一章-项目起步" class="sidebar-link">第一章：项目起步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-项目介绍" class="sidebar-link">01-项目介绍</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-使用技术" class="sidebar-link">02-使用技术</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-创建项目" class="sidebar-link">03-创建项目</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-调整目录" class="sidebar-link">04-调整目录</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第二章-项目架构" class="sidebar-link">第二章：项目架构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-引入vant" class="sidebar-link">01-引入vant</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-适配单位" class="sidebar-link">02-适配单位</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-进行适配" class="sidebar-link">03-进行适配</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-约定路由" class="sidebar-link">04-约定路由</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_05-命名视图-概念" class="sidebar-link">05-命名视图-概念</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_06-命名视图-应用" class="sidebar-link">06-命名视图-应用</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_07-实现tab栏" class="sidebar-link">07-实现tab栏</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_08-字体图标" class="sidebar-link">08-字体图标</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_09-图标组件" class="sidebar-link">09-图标组件</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_10-vue插件" class="sidebar-link">10-Vue插件</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_11-改造底部tab" class="sidebar-link">11-改造底部Tab</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_12-less全局变量" class="sidebar-link">12-Less全局变量</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_13-vuex管理状态" class="sidebar-link">13-Vuex管理状态</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_14-请求工具-基础" class="sidebar-link">14-请求工具-基础</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_15-请求工具-赋能" class="sidebar-link">15-请求工具-赋能</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_16-await异常处理" class="sidebar-link">16-await异常处理</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_17-接口api函数" class="sidebar-link">17-接口API函数</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第三章-登录模块" class="sidebar-link">第三章：登录模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-登录-导航守卫" class="sidebar-link">01-登录-导航守卫</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-登录-组件布局" class="sidebar-link">02-登录-组件布局</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-登录-表单校验" class="sidebar-link">03-登录-表单校验</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-登录-默认登录" class="sidebar-link">04-登录-默认登录</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_05-登录-短信登录" class="sidebar-link">05-登录-短信登录</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第四章-首页模块" class="sidebar-link">第四章：首页模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-首页-频道展示" class="sidebar-link">01-首页-频道展示</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-首页-文章组件" class="sidebar-link">02-首页-文章组件</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-首页-上拉加载" class="sidebar-link">03-首页-上拉加载</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-首页-下拉刷新" class="sidebar-link">04-首页-下拉刷新</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_05-首页-接入数据" class="sidebar-link">05-首页-接入数据</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_06-首页-处理时间" class="sidebar-link">06-首页-处理时间</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_07-首页-组件缓存" class="sidebar-link">07-首页-组件缓存</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_08-首页-阅读位置" class="sidebar-link">08-首页-阅读位置</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第五章-频道管理" class="sidebar-link">第五章：频道管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-频道-组件准备" class="sidebar-link">01-频道-组件准备</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-频道-组件布局" class="sidebar-link">02-频道-组件布局</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-频道-渲染我的频道" class="sidebar-link">03-频道-渲染我的频道</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-频道-渲染可选频道" class="sidebar-link">04-频道-渲染可选频道</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_05-频道-点击进入频道" class="sidebar-link">05-频道-点击进入频道</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_06-频道-支持本地操作" class="sidebar-link">06-频道-支持本地操作</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_07-频道-添加" class="sidebar-link">07-频道-添加</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_08-频道-切换编辑" class="sidebar-link">08-频道-切换编辑</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_09-频道-删除" class="sidebar-link">09-频道-删除</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第六章-文章详情" class="sidebar-link">第六章：文章详情</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-文章详情-顶部导航" class="sidebar-link">01-文章详情-顶部导航</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-文章详情-主体内容" class="sidebar-link">02-文章详情-主体内容</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-文章详情-渲染页面" class="sidebar-link">03-文章详情-渲染页面</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-文章详情-导航交互" class="sidebar-link">04-文章详情-导航交互</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_05-文章详情-关注作者" class="sidebar-link">05-文章详情-关注作者</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_06-文章详情-骨架效果" class="sidebar-link">06-文章详情-骨架效果</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_07-文章详情-代码高亮" class="sidebar-link">07-文章详情-代码高亮</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第七章-评论回复" class="sidebar-link">第七章：评论回复</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-文章评论-组件布局" class="sidebar-link">01-文章评论-组件布局</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-文章评论-渲染列表" class="sidebar-link">02-文章评论-渲染列表</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-文章评论-底部工具" class="sidebar-link">03-文章评论-底部工具</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-文章评论-传送功能" class="sidebar-link">04-文章评论-传送功能</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_05-文章评论-点赞" class="sidebar-link">05-文章评论-点赞</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_06-文章评论-收藏" class="sidebar-link">06-文章评论-收藏</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_07-评论回复-回复弹层" class="sidebar-link">07-评论回复-回复弹层</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_08-评论回复-列表渲染" class="sidebar-link">08-评论回复-列表渲染</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_09-填写文章评论" class="sidebar-link">09-填写文章评论</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_10-填写评论回复" class="sidebar-link">10-填写评论回复</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第八章-个人中心" class="sidebar-link">第八章：个人中心</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-个人中心-基础布局" class="sidebar-link">01-个人中心-基础布局</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-个人中心-渲染页面" class="sidebar-link">02-个人中心-渲染页面</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-编辑资料-页面布局" class="sidebar-link">03-编辑资料-页面布局</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_04-编辑资料-回显数据" class="sidebar-link">04-编辑资料-回显数据</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_05-编辑资料-退出登录" class="sidebar-link">05-编辑资料-退出登录</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_06-编辑资料-修改头像" class="sidebar-link">06-编辑资料-修改头像</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_07-编辑资料-修改昵称" class="sidebar-link">07-编辑资料-修改昵称</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_08-编辑资料-修改性别" class="sidebar-link">08-编辑资料-修改性别</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_09-编辑资料-修改生日" class="sidebar-link">09-编辑资料-修改生日</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_10-小智同学-基础布局" class="sidebar-link">10-小智同学-基础布局</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_11-小智同学-认识websocket" class="sidebar-link">11-小智同学-认识websocket</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_12-小智同学-完成聊天" class="sidebar-link">12-小智同学-完成聊天</a></li></ul></li><li><a href="/geek-document/guide/03-mobile.html#第九章-项目收尾" class="sidebar-link">第九章：项目收尾</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_01-刷新token" class="sidebar-link">01-刷新token</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_02-打包部署" class="sidebar-link">02-打包部署</a></li><li class="sidebar-sub-header"><a href="/geek-document/guide/03-mobile.html#_03-项目总结" class="sidebar-link">03-项目总结</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="极客园m端"><a href="#极客园m端" class="header-anchor">#</a> 极客园M端</h1> <h2 id="第一章-项目起步"><a href="#第一章-项目起步" class="header-anchor">#</a> 第一章：项目起步</h2> <h3 id="_01-项目介绍"><a href="#_01-项目介绍" class="header-anchor">#</a> 01-项目介绍</h3> <blockquote><p>目标：了解项目背景，了解项目功能。</p></blockquote> <p>项目背景：</p> <ul><li>它对标 CSDN 博客园 等竞品，致力成为全球知名的IT技术交流平台，它包含 技术文章，问答内容，视频解答 的专业IT资讯平台，它提供原创，优质，完整内容的专业IT社区。它是 <code>极客园</code> IT资讯社区。</li></ul> <p>项目功能：</p> <ul><li><code>极客园-个人端M</code> 是一款移动web应用。</li> <li>主要功能有：
<ul><li>首页-文章频道，文章列表，更多操作</li> <li>详情-文章详情，文章评论，评论回复，点赞，收藏，关注</li> <li>登录-短信登录</li> <li>个人-信息展示，信息编辑</li></ul></li></ul> <p>项目物料：http://geek.itheima.net</p> <p><strong>总结：</strong> 我们知道项目的大致功能即可。</p> <h3 id="_02-使用技术"><a href="#_02-使用技术" class="header-anchor">#</a> 02-使用技术</h3> <blockquote><p>目标：了解使用技术</p></blockquote> <p>开发依赖大致如下：</p> <ul><li>基础环境：<code>nodejs12+</code> <code>vscode</code> <code>vuecli4.x</code></li> <li>配套工具：<code>eslint</code> <code>babel</code> <code>less</code></li> <li>使用技术：<code>vue2.6.12</code> <code>vue-router</code> <code>vue-vuex</code> <code>vant</code> <code>iconfont</code> <code>dayjs</code> <code>socket.io-client</code> <code>postcss-px-to-viewport</code></li></ul> <p>项目中的解决方案：</p> <ul><li>使用vue-cli创建vue单页应用解决方案</li> <li>使用vue-router实现前端路由解决方案</li> <li>使用vue-vuex实现状态管理解决方案</li> <li>使用vant快速搭建移动界面解决方案</li> <li>使用json-bigint处理最大安全整数解决方案</li> <li>使用iconfont实现前端多色字体图标解决方案</li> <li>使用dayjs处理相对时间计算解决方案</li> <li>使用soket.io实现即时通讯解决方案</li> <li>使用postcss-px-to-viewport 实现移动端适配解决方</li></ul> <p><strong>总结：</strong> 我们大概知道用了那些东西即可。</p> <h3 id="_03-创建项目"><a href="#_03-创建项目" class="header-anchor">#</a> 03-创建项目</h3> <blockquote><p>目标：知道如何使用vue-cli创建项目</p></blockquote> <p>大致步骤：</p> <ul><li>在某个目录打开命令行工具输入创建项目的命令</li> <li>安装项目需求选择具体的工具，然后等待创建吧</li> <li>最后进入创建好的项目，启动项目即可</li></ul> <p>具体如下：</p> <ul><li>执行创建命令</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>vue create geek-client-mobile
</code></pre></div><ul><li>选中自定义创建</li></ul> <p><img src="data:image/png;base64,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" alt="1622440144872"></p> <ul><li>选择Vue版本，依赖Babel降级ES6语法，依赖vue-router，依赖vuex，使用css预处理器，使用代码风格校验。</li></ul> <p><img src="data:image/png;base64,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" alt="1622440310596"></p> <ul><li>选择vue2.0版本</li></ul> <p><img src="data:image/png;base64,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" alt="1622440660281"></p> <ul><li>是否使用历史模式API，输入 n</li></ul> <p><img src="data:image/png;base64,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" alt="1622440752792"></p> <ul><li>选择less这种css预处理器</li></ul> <p><img src="data:image/png;base64,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" alt="1622440811661"></p> <ul><li>选择 通用语法风格配置</li></ul> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAACjCAYAAABFXnfyAAAgAElEQVR4nO3dzatex33A8XmuHsdSbMeOBGkcJ0RNMUmaQFO7WBWh0GXIxv0TQhcudCW800ItNAtDFwJvsvCi5F8weKFNocmishcGh4ag0IaqLTWC1qntJLacSLpdSOdq7tyZ+f3m7cycc74fMNY9L/N25sxz5pk58+wuXbp0+Oob7xoAAAAAANbsoHcCAAAAAACYAx1gAAAAAMAm7O0/zl65dmznL7//HVUgt99+0bv99POve4/1bV+DqRzWmr+1uvjyK0f/vn718om/R3Lx5VeiaZL29zZ6+gAAALBuRx3gs1eunejw+rb5nH7+dW/H1t4W6iSDjnNvbqfX3j4KX/pS9vc2evpsU1pHuv4AAACoY7Yp0Keff331HbzcPK69XGra6hcp169ejnbIpP29zZW+0o72NEId+lKk1JK+CAAAAFijYx1gdwo0sDS3335xs51k1DXyFwoAAADIczQFOnf6c01ux8U3pTq0z3e+e5wUvpSuaap3TtpSjtOGVfu8UP7ccEPxpFy/1PPtfb2mjIfeDbanzPqO8U2pjW1zt7dId05c0jRxd39qHjTnS9fA/ndK/JrzpfTFyjQWvlQ/tO+op6QvdAwAAMDa7X0bczu/uR3M6VzpHWK3QxT7202PFH7M1OmLpUfzrrMmzW54Wilh++KK5c/eFnqvO/X6pZ4fC8fNSwvu4k3231OnJHSMbzqtuy0WfqkpLjs837YY37Gx9Ie2pYYfKxP3GqTGaZPOl9InpTUWvlQ/7HPdOHPT554PAACwFVXfAZ7egW3xvm9spFBzTu00uCOhEl/HreYq2TnlEwsjlD9fpz/XaO8+xzqFsZE23zE5cUvhl5A63LlhziXUcRxF6+vni2dJ1w8AAGAU3hHgXqSOm2+q7iS0LSX83krTFyufOcTiXMP1CU1LXUr4JUKjlLYaC1CNTLsSd6/rF4tTc/0AAAC2wNsBnvvd34n07qw0YihNcR5txNGlnebrM8LvK6/5+rT+/do5fh/XN6029XxbaJpvSfpGNvrvL0vxl0xRBwAAWIsTU6DPXrk2zGrQoRFB3/ac0cPUc6R3VmN8I6Ch+EtHcHPPLcmfJryS87X751gFusboXiyMEUdCc9JUc0TYN4LZ+7eRQ+Fr421dB3wLbwEAAGzd7tKlS4evvvHu0Yap85syCpy6snHoWO0UWd9qxTXCj5k6hJpVoGPh+8pKu8qyJo1uGCkrXWtWgY6lS7uKcygM7fWJ5S1nhWh36mpopNQ3xVVa+Tm2LbYacGifTXrvVLuYk4Ym/NgU29LzfceE8lG6CnRu+mLXT5M+qcMfi1tKHytAAwAA3HeiAwy/EaYYt7T2/OE+pr0CAABgy4ZaBGtU06jiWjuJa88f8kZFAQAAgLVhBBgAAAAAsAlVfwcYAAAAAIBR0QEGAAAAAGzCsXeA3Z8/Sv09YO1qwQAwqpyVxEew1pWetausr92o7/GPVO9aLPIXWo19tOvQylruv9JfUsit51uvP1unvVdGbd/X7KgDfPbKtRMdXt+2EN8CSvbiSsa0e6Bcevi948NJpdeg5HyuP1L5HvynD9Slf7DaP08W24Y+fNci5drUqJ8tf+c6VNe2Uv/WcP/F2sca+2O2Xn+2bmn3ypbMMgW69YN8zfB7j2JPXyS4vwdcM3zISq95Sce55fWHbCr/FnpcUz541+H61curvJY18rSWsmnZkQcwrhptGO1HmmMdYHcKtFbo53MYwSpD+W0b1397br/9YnInOfTt8ho6BCF8ow70s6T7L7d9LN0PYGxHU6BLpj+nsB/uQlOmQ/ul81OOiZ0Tm4Jamv6S+KXwtWlzw/fFZ29zww3Fk5K+0DE+sbTEwi/dH0pH7vnasFOvv/b6aOIOhamJv7T+SOmzzw3Vu5L66QsrtC/1fG370lrsfST32+PS/e4x0vkxsWlkvim0sW2p8btlFirDUPi558fCkNLpOzcWdw1S2Cl5kM6PhdFK7v2hqZ/udNuc8KdtLa5x6/svlIe5rrE0TbXlNNbS9kUbfqhca8Zf8/NFil+bvhrtb2uactOmfcT2Y1R738aWnV/3odB+iPY9cIaOD50zSX24jKWjVvpL4pfCl8omFr5vuq2vszGNTvk6RKnpc8+PmdJSUv6l6WuZvymPoXCk+DXXR4rbV1+05Vej/mjSF0pPjfppx+VLW2n7pGlf7ONaiL2nKb2jlrs/FHdoWw73Q9u3rSR+9+FX+87rtM0uI7fMpPPtNLjbpLzY8btxp+RfKxZ2SnnlHD8H7b3gbtPUz1jYmvCnv0P1q6Ua95/vnpr74VvqeJd2zEMdkJL2QbrWofvfLfvS+KW/W31+aNJXo/1tLXYdNe33ktuPnrwd4FZKHu5iD6vScbWMPCU1NtLVKp7S8sj9kgJhuddH0+HtmT7fuVKbMGd90bZPPfV4oGxh7o5PTSkP+LXzOHdn0feAZkz8YT10PnTm6EC2ui6lHcxaaTBGnjadUwbaL9tSji8J25eH3PilsHK0aB97tr+l5khPzy+gepi1Aywp7bi17PiNEL92iq5vRG4OsThDo4Rzxa/ZXxo+1o3rHxYaBbL1/ka5JH77gTH2LXtp+O62NQlN5Us9v7denfNR8p9rSemXrnGPOrCk8vOJpV9q/1q3j1tqf/GQtwOcOv05NBqTOopUa0Sx5SiwJv4e4ffKs02Kv7R+1I6/dvhLF3rHFveNWiahh7FeU0RD8dcYESjtZLZUe8RjTSOgNfKylrLI1Tv/o99/sXhzpuCGju2ld/ylUkdcpc+Plq9wtAi/tzXlpZYTP4N09sq17NWgbTU6N7HFbdz9tlojoKOPGIbC18YbO652+Y02Ii3t16S3dfktWYv8S+/0zi23fYrtn95jLrWE0Ynch2lNvjRhp8afOuqTEn7vb+en979qhhcqp9h7zJrzpXBCx9bMX2lnsEb97JX/Vvdf7J3pOevnUqSWR+r9lSJ0zVLSoz22BU38tdMwQp62bnfp0qXDV99492jD1PnNWQRLswKqb5GZ0MIz2lVWYw+iOQ/JvsV7aqVfijN2vhS+bwp0rAxj4UtfIkjXxj1Gk7+QWuWfsj+0iFPJ+TEl17+kbH3pCJ2bm3+f1PRN6fKVqTb/KfenZlEzbfsUOibl3tSwP9BC71z6FrgILXohTWGW3utMOV9L27HyvU84Z/yxeH1xS8eUlG/K9c8tEylt9nGhayO9A1qj/pXmzxdnzv0Ty6u03Q0/pfxLOz2t7r/Q9Hj3mJL0h8L1pS2UvtD+3HhTwi5pv2L3V834U8o4JQ212j/tuaFjarWPKWnUtt9ufLXbjzU60QEGsF0jjKz6tE6XtKIzsHZrGBWLWXv+JEvP/9LT3xNlV44yXJ8TU6ABbI/7E0IjmUZF53ilYORyAFpZ+8Pd2vMnWXr+l57+nqYRPqa85qP+rRMjwAAAAACATWAEGAAAAACwCXSAAQAAAACbcOx3gN2fP0pdCbrmarSob62/8apdJXru9KytnAGUW2r70DvdNVbxBgDAGKsDfPbKtRMdXt+2kNjPhvT+4MSypNaX6edx7ON929aK+wtrRv1ethrXz7cIDQvTAAByzTIFmgeXMZx+/vXhr8XUaZV+R3ZkLcu59SyLpZb5XErLp3f5zrGSdu3zR2+zUs3dPtSiSfcWrh8AYPmOdYDdKdBaoZE2PvhQoqT+bGX0FwAAAIDe0RTokunPKWLvZrrfHpfud4+RzpfkvlfqnhcKJ5S+3PNjYUjp9J0bi1sjVv72vpwpc7Epz77wYtt86dNKqd8pcWjLRxt/bF9q+WvfwdbUr5w0+Oqn++9QmkLnh45JTVvK+TXbJzeM1PhDeQ+V0RzlE0ujuy8l/lid8cWZ2n7XTH+L+qm5f6R2v8b1iymd6my/P3z96uWjv5lCDQDb5P0d4NTOr2a0LfRgYT9A+R4I5tqfmsfUEUbpfE36fA/0qfmLdRKl8rPjjoXlU5q+1DhSy7dlWmqGn9rJTymP3DSFzpvr/ozlbfq35v4zRq7fJXUidn7t9ik1TG19Ncbf/uSkWZsPX9zusTXKzw4/Nf+p8ee2/3O0KTnthrS/9PPDlfP+r30O7w8DwLbN+jNIJQ9GveOLfdM/JzsdUv5ql/fc1y9X6UP4XOa8Pq3rrztKNOc1cOP2pUGT/yXUmRQp+dHWj5T2p7bW8bl585VDr/z77qda8Wvun1rx1JDbeZ1Gfun8AgD28iHL4PsQD32Dnys0JSwlfb7RqBrp0+QfcS2/2Bjh+pTU36WI5WvN+a9Rv5ZePktMs22E9I+Qhhg6rwCAGrwd4NR3f0OdurlH4qT4W0zNq6k0/N7l31vpg/vc13fO6zNX/fVNdZybZsrzGtWeQr00pL+O2Je0PdH5BQDUcmIK9Nkr17JXg7bN/QGa0/HJ7Szlnpf6YJESz+jf3M9J+95oyjG3336xqIxbXJ/W9bdnnSqZYVE77Fbh1Czfmu3fWson9fxeU/hD7PT4vtyT8peS/xad3pr1O/Q7wPa/7b9jYdiLYAEAtunEIlhT5zdnBWj3Azu2XdrmhiHtl97X0oQv8U0RLF1wRJO+nLy5x5SUj/b6SUqvnzYOTfn6rqEmfbkjarXy50tL6v0l1d+SUdyc+u3bn3OPxRbvscN3w06t36Wj3KHzS9qnlPolxR8rH03aapdPrc8PKc5QndPmPyX+WP3UxpF6fSWx+6ekftX4/Ah1WO1Frey/Q+e7nV9GlAFgm7yrQANIs8Uptz5bzTeWrXW9pX0AAGAcq1kEC+gtZ1R8LUZ49xfIMdXdOTrBE+4TAAD6YQQYAAAAALAJs/4OMIBxsHAaAABj47MaqI8OMLBBvIMIAMD4lvrb7MDIjr0D7P78kXYl6FqrBLfGe4pYstJVzO1wpBVeS8LPxf0JjIv7U/7icMlfLHJ9y7Quv9yfKvOtkM5K6IA1Anz2yjXzy+9/59h/2t8Dnm5I+8b0bWul9DdacVLLMuV6pZs++Oz/apWhfa+2CB9APWtoP3vmISdu6ZzY/tZ5XUN9qI0yecj9qTB7G51fbNkqpkBrO9nTg32JrTSqrb64sDtyayzL0fM08ghFjfsTaKn3/d2z/ax5f/a6z3PLT8p7bH/rvNa8Jmtpf1s+v8TinONa926DgLU41gHWjvgCNazlw3YufPABmNB+lqH8sCXXr14+NgoMbN3RO8Du+77TlOiafA/wsXcRcz6gQu8ea95JjqXP3hd61yOUfjdu6W9temPp9p0rla/UwSq5Pi3LLyXu2PlS/L5j56gfobBqP8Cl1g9f/HbepzSmll8s3pzrF9ofyoOUp1i8pfUr9h5Zq/sjFH5q+kPx1yof6XxJyedP7P6W6rf2+mrTPnf76QvDt08Ku+TzJZSHnPRryq/1CKJ0f2ueUUqOSTlHe32lsFu1n6H9vvhj23xp8W3X5CGWDve40vKtxe0cMz0aa+f9HeCczq/vgdzeVrpfE78xJxslbZjaY0vO9z041cx/LNze10c6p7T8tHGHzq+V/znyV9L51YSZm1c3DCkvqXVqjusXos1PSfpi4be+P2qUX0r+l5i/WJyl11erZ/spxW+H7R5bq37NVX65ba+2fGrdD9q2Riv3+mrCtc9v0X7WrF/ac3z5rNE+pIYlufjyK8feBZ5Gg91toXOANer6DnBuI73U8Nww3X9PjaAxZR9iaxYqv7nOb2309IW49bVV2mvGkXp+7H4NHVM7/NQwSox4f/XOX634cq9v7TS0CruFqcxafDb6viioLXb9pfh9ea7VOdKqeb+1aD9LaMu3pSV93gNrsJcPqcPX4IW+AexBk76t63l91mAp5TfdCyPdnxqx9K3h/m5Z/q3bZ7tOSaNMLYz++YP+5W+PwvVIS2n8vcsPAJbE2wGu/e7vRJpO0vuBNHW6S4v4fVNhRjFimpakVvmVhBPrgLSMdw5S+nrf36XmGGGzzd0+rz1/iOtZ/r3bghrx15gCjbHVuLYshgXcd2IK9Nkr15qsBj36N5qjp29umrytOf+SGuWTW+fmKHfNKIQ7hc+dwq89t5WU9OSEV/shMzX8mmU4R/uX+uXL6PmL7Q9NY7X/veVOSk77OZVZ6xHaVmFrr39oarCvPHx6jWBL5qz/qfduSvlq9wMY24lFsKbOb84ocGyKmfS+h3S+Nl53UYFpmxS/Jn3usdr0p4ad+sEQymvo36E0xMLx5SMlnSXXP6X8cuOOxe/bHxutb10/Yvu17HomvYuWcv3d+ha6x6S6GYtXijuWFymMEHv6bm7YUvqkGSCt7g9tGK3bt1HzFworpX3QXN9W6W9dfprPX9+2lPYl1FaUfJkSa7eltIXSF9uvvb81ny2htLUoH+31lcJv2X760hS7hpq0pNz/te5PaVvO57492msvauUucsUq0Nga7yrQ6GfrIwOYzxzfwq+lLlNWKMH1xZZR/8tQfkB9XVeBxkO3326zuiUQMscUtDVME2udlzWVFU7i+mLLqP/leC4E6mMEGAAAAACwCYwAA53wjTgAAMvGZzmwPHSAgQ6Y7g4AwPKNuvI2gLBjvwPs/vyRdiXo0I2vXR13KWqsBBnbj22IrY5sm7tuLKF+b/mLg6W3n631qr81VuGtZcv3B1Cq5P7x/fJBDaFVnAGUOeoAn71y7USH17fNJ3Tj12oMRnjwC+Wv1n5sV+v7R4P6PY4R2rveUsugZ/2VfsYrR07+gUlK/enR3pTE2SK9I98/169ePvGTRQDKzToF+vTzr2c1Wlt+EMS69B6hGfmDXqskD6Pnf6ofvk5Vbvu5RFvJZ0hq/rdUN9asVvuUUhd61JvcOGPtY2l6Umd7hMIZ/TMGwH3HOsDuFGjcF+q0SA1m6X5gDkup372/PJjblvJaYin1F0A9S7w/p5+7BNDf0RTo3OnPWtr3ojTH5b5j1fLdLOn9j5L3Q+wpP77pP9p30HwjSqPFH7tG0vm13wGc9o3yjl9J/t3pnr7zY1rW71KxOpmSf+n6t6z/UvqkOhdKw5z1W8q3FHbLB8MR6m/O/Wtvj9XvVvHXvP7T9tqfT6Hz3fikOpl6rBR/yv1V0j6F9ufQtj05bYSUvpL2MZamGvdP6efnHOx3hY05+b6wu989RtoPrM3etzG38xtrwHwNp+98t5GKPbCkpk0bdi7pA1LaL4Vrp9n+t73NPWbiy2/oWDfuOeKX/takP/aBmLt/yr+UvxqkB4CS/MeO02pVv3PTYdc/X9ml5F+6/q3rv5Q+zX3qnqutPzXqd+ze9ZWfe4xUf2voWX9L7l9N/W4Zf074LT4fUuK3w5fKT3N/x/ZL6dfkv6R9kvKvJeXfbVtqXZ/Yfm37qGl/bKn3T43PTzuc2nzvCNvbQvul84E183aAc5Xc3L6GRftBkJq22g9Wvng0D7Kp+dB8AIUegFPC7hG/9vqnkM4vrUe1P8xGD88Os0X91mh570pa1v8aanTgarQfsU56b63b5+m8nvW0ltrX3z2udX2o/fla0gEMhTGSWP7cv1u177nmer5bE2l0l9FfrF3VDnBrpQ1b7Bvh2qQPyNwP0BJL/2CQHqxiI6jS/qWbO39z12/fN/xL0zvNreOfs30tNWL73FpJ+5kSfu71L6kza2/fjenffrS2pOe7EcVGbKeVpN1t2v3AGnk7wDXf/a2p5NvHkoeZ0MNQyjeiIzxM9Y6/VOqIbuwbfN/+ObR8sM7N3xLr9xI7KL3T2jL+ntdiifW3h9L2M6ZG+dU+f23XtHdeaswwkcLPNcq17pmO1BFdd9qztB9YmxM/g3T2yrUuq0H7vrWLTaUr+YavxreDPRo66Z2ZkvB6xG9Luf6h9GiPXaPaIy61r+/0/ttcNHH1rv+1y2NKk7Z9bHU9arWvpeeP8ECca472LKX9zA13rnBK7mXfttAXKrH9tZXUgdLPg9b5a9k+zdX25ZZxrftDekfXfce3JCxgjXaXLl06fPWNd482TJ3flFFg+4YONZq+m953rC8sd5smvlgacr/JjMUr5U+b/1jcoXTnlO2o8aeUcUoaNGkMhV967Xzc0SlNuCX594UTy3+L+p37UKVpE3zbpHym1q+W9b+0fEPT/2Jh1K7fofa19vWT4ved07J9dvOqrSfS/eeGEdtf0r759vnOl2iufyzs0s8nKQ6p/KQ2Q6qTte6vnPbJ3Z96/2jyZx+XI6V+u2lIub6a+y+3jrrxuNulssl57pSmNoeOS1nhmRWgsUUnOsAYU+8Rjd7xr9HWynTJ+V1y2gHESfc39/99lIMf5QIsz4kp0BjP9K1hrakzS4t/rbb0gbnkBwTqP7Be0v3N/f9w6u5S2/DWKBdgeRgBBgAAAABswu7pZ184vHV4vnc6AAAAAABoiinQCNrylC8AAAAA63Psd4Ddnz/SrgQd6ihpV19dkth7MGvI34T3fbZnTfUXAAAA8DnqAJ+9cu1Eh9e3zcf+GQFbrU7UCA/mjIbqjXC9EMb1AQAAwFbNOgX69POvZz10j/Cgrkl7bv5sS+9oT196hH5brzcpTSOmuabY9alRfwEAAICRHesAu1OgsU21Ru7pTI2txfWZfi4DAAAAGNH+sTN7Yz46+b6vdvqzlv1QLP3gvHScNqxa55WGbU85DR1nbw9NUfWN2PnibpnPkJbpj3WoQmUYi9uXvlHKX5sHX/wl9Sv1vpOOBQAAAEa0+8o3Lx7+++0vHduY0/nVPhxLi0i5D+X2Q77v3ynpC4VdEo52f6jToX1vWnOsG0eNckrVKv3Sv7XXt+T6tS5/bf0P7bfj1qZZSoMmbQAAAMBS7D/+5G61wGp3nHI6MJq09ZqiOUeHwY5jiR2U3PSPcH3ddJR0flPPzzkeAAAA2Jq9fMg4Sjs2oamiS7HENM+p9fXdcvn3mloPAAAA1OTtANd897emnlN7R9A6/UsuoznSvtSyqWHJdQMAAACYnPgZpLNXrnVZDdo3ahcacSsd4VvKSN7Wf7Inl7ZcSsu3Zvmn1P8epvTZ//mwCjQAAABGtnv62RcObx2eP9owdX5TRoFrriDrC6vWKru+KbLa86X0x/Zr8hRKZywNvrBCYUpqLH4lpSE3/aHrr/13KK1SXZ2z/H1x5K5C7dtWUn+n/ZoFtVLvKwAAAGBOJzrA2CamuCImZ0VpAAAAYDR0gAGohEagAQAAgKVY1CrQAPqhwwsAAIClO7EIFgAAAAAAa3Rw+lOneqcBAAAAAIDm9vv9zphPygJ5763XvNvPXXhJPO7chZeObXfP8Z0fO6an0dOHvtZQP95767VFpx8AAADbtv/1R3eKA5k6sb4O77QttD92/lasoWOEdQt9yQUAAAAsSZN3gFt16M5deKk4zJYP8pr0hUbBsQ6x+lWj/vay5LQDAAAAk66LYPFADQAAAACYS9WfQZJGv0qmOcfeE3anUvuOs7enjlD7wg/9OxSuNn7t+9CxdLrnu2Gm/l0avjbdbpn64m2ZPun8kvqlKZOS+DVahe87pySdAAAAQCu7p5994fDW4fnigKT3fe3jjPF3YrWdpVjH0e105MYTOyeWVyn80vSnhOtLmx1Hyv4a4Uvpl84tSZ90nTTn23FrzgnlM3T9a8SfEm/N/NW61wAAAICWZp8CPb1L2OJd3FYP26H01n7An6OzYMfhi0/aXxp+yrnS+9Jzd656d+Zax18Svnu96PwCAABgRFWnQE80D75LXfl55NVwR07bHLRT8KVReAAAAADrtP+Tb3zWvPHTNoFrp0Uvzaid99HSM7fS/G+9/EqF3uEGAAAARnHwyH7XOw1BrUfkUsJv0ekdKX8jqD2F1rfoU857ybXiBwAAANDX7uvPffvwxofPFAUSetCPrbBr75emrqacr1mFNneUSlpUKZQ+Xzgl6Y+lzxe/lDZt2nPD17CnJ9dOny+eUBp859eoX5o81Io/pCT8lGvA6C8AAABGVaUDDJSi47QOXEcAAACMbPZVoAHXNLrIlOHleu+t1+j8AgAAYHiMAAMAAAAANoERYAAAAADAJtABBgAAAABswr5GIJpVoEPHuSvMxt4hXMNvjGpWIV5y/nqi/AAAAADEVOkAh35fNfazQdO22PnQKe34La3juLT0AgAAABhDkynQrToo5y68VBxmjZWGS8OIjZjn5K+0TJbUkZy+KPH9Nm2N+gEAAABgvQ6+8Lkz3SLfWmeFUe66KEsAAAAAKfZf/L0zxvxbncBiI6Ol05xj7wm7U6l9x9nbR5xCq8nftE9bFr5t0vvWtaZTx9Lm7q9x/TTvkYfeQQcAAACwDbsvfvXC4X/f/XJxQNL7vvZxxvg7R5rOSOi4UKcoN55Q+D7a8DRllFJ2bnihfb79qeen5k+T31j8mnM0adCkDQAAAMA27O/eO5w1wpIOljbsFmp1nkrfH7bjddPg7nPTKaVZOj/Gd2xqGdEhBQAAANBSlVWgXZqOzNZWfg6NyGIeKT+3BQAAAGCdmqwCPfG9t4n7fKsYox179Wg6vwAAAMA2Ne0Al2rdQcwNf9QOlPuFQ847vLnn+zr0I3Xwp/TZ/wEAAADYlt3Tz75weOvwfFEgsd+1jR3jLoAUC0N7fmybm5a5OrKa9KWWT2hxKO0Kyb74Q+enKFkFWkqfS1u/pv21FkQbxVPmjnm/zVsMAAAAwCpV6QADo1tTB/jz5rfmB3d+Zv56/4fmlvlU7+QAAAAAi7H/o68+aW7d6J0MoC3fKPISO7/fu/uuuXr3hvnhqWfo/C7ctw5/ZZ4yv8s+/33ziHln90TFFAEAAKzf/jOPPdI7DcAsltjhnXze/Nb8w52fmu/c+19z25wyf3/q93snqUhp5+/8vdvmy+bj7POfNHfMtw5/lX2+Mcb8+b1fFp2fbHf/f782p8ydB8s3/Hj3lPmL/R/Pmw4AAIAF2//Lv35gjHm8dzoABEyjvk+ZO8YYY27uTpu/uvtf2eEtsvO3BDvPttjPrO+M+dDszb0HJ942B+aW+ZT5wOzv/3v36IbgUIkAAAWtSURBVNGhP9qdNTcPTp8I4qY5U5hoAACAbWEFHWBQ9qiv7WuHvzF/e/cXnVK1YBkd1JTjf2YeN7/d3T/pP3dnzP+ZvXnfPGJ+bh4zNw4+bYwx5rY5Zd7cPalOMgAAAOo66gBffPkVc/3q5axALr78ine7G57vuOtXLx/bHkvDdFxuOnsL5R9jGKl+uaO+m7Uz4U5naoc2ts/xTwdnj/79zu4J88GDpvI/zJmjkVjewQUAAFieow7w1BHNefgPnWtvC+0vjXspYvnvoXVnb6TOpGvktIVGfTersEN725wybx48HHF9c/ek+eTB+7M/3z1mbu3uLyRGZxYAAGAbjk2BrtURncKo3cGoEV7N/LUw1xcB7sj70sLPFftSpneHmFHfuPfN3rxz8Jmjv3+0++zRv+3O7C1z2tzYfXr29AEAAGB8J94BnnM0tneHo7et57+3Ucp/i6O+t8yj5sbBY0d/253Zn+yeMO/v7jdNN80Zc3PHQk8AAACow7sIVm4nODbiV9qxjr0n7E6l9h1nb+8xBVbKvyZ9Ut6k96mlEVlN2WnLOFdK+u2R3JS0+cpX8x56i3e4v3b4kfnn37256FFfuzN72xyYt6xFnt7aPWVuP1gY6sbucX67GAAAAF3tvv7ctw9vfPiMd2dKh1V639c+zhh/50YTV+i4UKcmN55Q+D4p4Umd71j+YnmT8p/6jrb0znZq+BqxNGjSH8u/Nk255V/i/OHH5m/u/cJ87+67VcIrcXP3cMT1fbM3P7Hei/3RwcNR2nd2nzHvs4g8AAAAFib4BNtqGrSmk1wadgu1Oj+5+deMtJbkXzuS2+qdWV95pIY/ypTmVDd3Z8xfnvqm+buDP6jaEb6xe+zot2RvmUfNzx+8F/uJOWXetN6lpTMLAACArdh/7uyj5saHxzeWdk41525h5eeYnPyHpvrW0jr8JUv5ua5c2o7wO7snzOsHnzPGnOzMvrl7ytx+sMoxAAAAgOP2z375cfPjmw831OyUaqdFb0Fp/luX39avj2TO8pE6wl87/Mh899SXeJ8WAAAASHTwj2/+z9Efo3WCWo9C5oY/VxmF0ld7sam5w/fxjTqPNAo9pc/+r7WpI/yVR/7M/PDUF462nzZ3zQ/u/Kx5/AAAAMDa7J5+9oXDW4fnq63QbJPeK3UXMIqFoT0/ts1Ny5yd/ZQVhKVVoO3OYmhqrmabb1ErKfxY2qXwNUpWgY5tk/Kg2V9rQbVc7mJZ390/b64dnJstfgAAAGDpjjrAAMJG6ABPpo7wn977wDz3yEXe+QUAAACU6AADSqER6F7OH35sTptDc+PB6s4AAAAA4ugAAwAAAAA2gbmTAAAAAIBNoAMMAAAAANiEfY1A3nvrNe/2cxdeEo87d+GlY9vdc3znx44ZkbZ8eltq+QIAAACARpUO8NSJ9XV4p22h/bHz10JTPgAAAACAtppMgW41knjuwkvFYYZGY+cOoxUpbbH9NcoXAAAAAEbV9R1gOlsAAAAAgLlUmQI9kUYXS6b8xt4TdqdS+46zt4/2rqubZk0eYvt8+UvZHyqXUPza9AMAAABAT7vf/8bFw5uffKk4IOl9X/s4Y/ydWE1nKXRcqFNX671bqXOfc36sIz/9Lb1DnZq/3P2auGLpBwAAAIDe9qcfPTDmk/kibNk5atnZkjrWqWFojlli53Hp6QcAAACwXvvDBoFqO3qMEKbpvfhW7/gBAAAAoMT+17+50yxw7bRo6PQuv97xAwAAAECJg7v3WowB19F6xDE3/FE6giU/eaTZXxo/AAAAAIykyiJYoY5QbAVje79mgSnt+bFtblrm6shKqyJrFsjyHZe60Fhsf8oiXe5+bfoBAAAAoKfd15/79uGND5/pnQ4AAAAAAJo6GHcCNAAAAAAA9Ry0XAQLAAAAAIBRDL0IFgAAAAAAtRz0TgAAAAAAAHP4f1y9IJN2q3C6AAAAAElFTkSuQmCC" alt="1622440877508"></p> <ul><li>语法风格校验的时机，保存代码校验，提交代码校验且自动修复。</li></ul> <p><img src="/geek-document/assets/img/1622441060425.952868fa.png" alt="1622441060425"></p> <ul><li>选择使用不同的配置文件对于所依赖工具</li></ul> <p><img src="/geek-document/assets/img/1622441142876.091cead7.png" alt="1622441142876"></p> <ul><li>是否记录此次操作记录，输入 n</li></ul> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8IAAAAZCAYAAAD6+pfcAAAEw0lEQVR4nO3dv2/WRhjA8cdOIFHVoRBo6VJ1yH+QIeoIEyzNkDkSE1uHduvAhNpu/QMQM2qHDplK1QGYEBUZGPo/VFV5QUyhUusOyMHv1ffLd+c729+PhET8+u6e84/Iz3vnS3X18KjZvfBa7j3aEqR1enIgIiLbe8fZ2s7Vfmpz6V+3HyLT7kufufcvp9OTg0Ufz6X3Hwj12Vffrf385PuvM0UCAOOoSIQBAAAAAEtS5w4AADDMi6d3Z9kWAABAaiTCADBBL57elZ39W8F1uNrZv0UyDAAAZmPzw53zUjXvNly8/WBth9Wd614Vqu8AiszrPcCc7/kCcFPqfRrrHelYSXBbR5vgduvsJr3t9jYZDm0bAAAgt80vj3bl/g8rEXmbBKuJb982nb7FSvoS4xKV+uCMPHJfD7nbR3y6348lnOM2we0muSS9AABgzuovvn0uj5/9lTuOUYWMWm/vHRfx4Aq90C9f2uRke+84yxc5oe1P5cunlFLep7mPb+7klCnSAABgDupnv7+SP1dvzjaoU6NDkTRiynJfv7nbR1y5k+iWLpkmyQUAAEux2f0hZFq0iJyNYJke3nV/71Xd7rKf+plNt6xp6qlrjLY2QmO0xZaiflu57rlJcf5s/TOVdz2/Oi7lde279n9o+6Zj3heDb/nU999Y109fXbrPfMsPuT66+6ScFt33Pm/ftly67yCXFBcAAFiuqvrkenNlayV/NJ+ufeCbBHeZHhLVB8uQn3XbXOIzPQAPbTM0vtT9d6nPVl5kPbnSJQJ9+9jiD/18aL9UIefX5RilbD9l/DGuP13dKdofcv+E3HOh+7rSjeb2bXfdpm5v/+/TlkvcIv9fkItkGAAA5JDkzyfp3m80jeyUIvZUVJ/6hhyf1PWb6tC9w6ruE2KKU4Nj9j+HlPGPff346EtOp3T9qqOtJSaZpcUDAACWa9O+y3Dtg67LdEx1f9uobYlsyb8Ll+OTqv4xmNp06V/J538Jpn78U8Yf4/4EAADAOLSJ8JBp0bbpfjHeiSv9wTLm1OUc9acW2r/c8S/d1I9/6vhd78+QOExTlrujwiFTmk2LZpU40gwAAOCrvrZ/WT6+tL228eLtB9FXj1bpRmZMo8E+9YTGUWJdJcSqLhgUmlj0LUA0tPyQz6fMpW+mfWIcG986Yl8/oUyLdKmf28q7HovTk4NZX5dD/PPzofEfAABAbNXDX79p7v/4m9x7tHW2sU2CfUeFbe/7dffpPnT6LoBjqt831u5CPGqdtodktX2X/vvEZYoxRf0uZXXlXGPzfW/cNjXadp0MWQxsSPsxz41r+7Z7yKd8H9/zZ5P6+tG151u+73eBbp+QPoR+CeC7kJVpJFe3krNaZuhosG1V6w9WvxjLb9z4ybtNAAAAk+rzo5vNR1sv1xJhoE8JI3iYrtTXj8uKz3MzdFXoWG3FYhv1JREGAACxVVcPj5rdC69JhGHkMkoG6Ixx/Sx9oSrTu8GlIxEGAABjIxEGAAAAACxKLSKykeSvCQMAAAAAUJ5aROTcOTJhAAAAAMAy1CIib/7+N3ccAAAAAACMohYRaZrcYQAAAAAAMA7mRAMAAAAAFoVEGAAAAACwKPX7721IlTsKAAAAAABG8h+MCeddLHwPbgAAAABJRU5ErkJggg==" alt="1622441203780"></p> <ul><li>最后等待安装即可，安装完毕进入项目目录，执行 <code>npm run serve</code> 即可启动项目。</li></ul> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8IAAAA0CAYAAABByIE0AAAFX0lEQVR4nO3dPYtUVxgA4HfGwY+JiRJitRZLgiTEIIKVkCI/wGohSZGfYCdsYZXSQvCHpLBOmxAwTcCECJJikQg2FnGju2R1szeFXLne3O+5szOz93lAnN1zzznvvVO9+557zmhtbS1JkiSSJInpdBpboysBAAAAR9V40QEAAADAYZIIAwAAMCgSYQAAAAZFIgwAAMCgSIQBAAAYFIkwAAAAgyIRBgAAYFAkwgAAAAyKRBgAAIBBkQgDAAAwKOOIcZz64Nii4wAAAIBDMb749YW4+uWH8dH5bsXhzY31nkMCAACA+Rk/+H0nYu95PH1y0Krj5sb6myRYMjwfV2/cqmyraj/qmtz/kJ8PAABQbhIREa/2Y/8gXr8xnNR32txYj9t3H731Ofu7vqUJzb07N+cyfhuHEcuQE7g+nu+Qnx8AAFDv7fXQZ95ZUBjVliEBTh1GLPfu3Kydp8k1s1pEQtn0nqru/zCeDQAAsLp62zV6XtVgAAAA6NPk4qV3I04ncTIi/mnYKV0KPatsxTFfwZu1GlnUPztHvr1u/rIKY9U9tImxTd8m/crizy49Lhsn+/u2S5Wrvrc2z79q7lmeeZv5AQCAo2ny4LftOHthp3ESnMq+I9zl/eCrN279LzHKJmuzJMZVY1eNXzd/1VLcJrG2jalMPqnNq4o/TYCr5q96DlXzZscvGiP93OT5Vn0fdfdfp+33CwAAHC2TePAkfvo9iSQiph0HabtZVlHSsYpJSFnyVHcvy3D/s8x3WO9JZz9LVAEAgL5MFh3APFQt+03NevTOsu9MvOzxLZrnAwAAwzWJ0TiOn/439v5u3mmeRyX1oUn1sK/2Za1ULmNMy8TzAQCA4Rpf+ubT+Pyr8/H+icObNF+xjaiu0LWt3mXfg03/1elaAS66l6bxtZl/VvPYfGye8ht2HcWjogAAgMUYXb5+LflsshU/fPdXHF87F1vPPmnUMb9rdJcKcdNdo7OJY5OEqOlmTFlNd40ui6tpbGVzVMXWtr3omrL4q+LItnXZNTr/vZXtWJ0fP7upVpN7K+pf1V50jQoxAAAMx+jy9WvJx7sP48fvd2J67kxs7V5qNcAyLpO2KzAAAABlJqfPRrx8uv/6p51XEaPFBtSHuoojAAAAwzX64ttryYlf/4jtM+/F/p8v45fHzZZGAwAAwCqanDq1FztPXsTj+ztx8tjJI1ERBgAAgDLjM7EbO08jDvYOOg2Q3zQLAAAAltn4+PMXsb3XvuPmxvqbJFgyDAAAwKoYbz98FrstO6U7Rae7Rd+++0gyDAAAwEoY3/95f9ExAAAAwKEZ95UGL9tZwgAAAFBk0qXTLEuh0/N982f9puf8FrVnzwDOnw+c1eSs4PycZT8XzZlvL4q/qaL7qLrP/POpi78uRucsAwAAQzVaW1tLkiSJJEliOp3G1uhKqwHShLhNRbgs2SxKhvNtRdeWXdcmhrpxquLrMnfd+FXtbeOv+7lt/AAAAKts3McgXSrEdUlXtj1f2exLfo6uffuOpUsfSSwAAEAznZZGM5uixL6oQjvr+Nn/8+bxhwUAAIBV0CkRTo9Poru6pcnzrvCqIAMAAEPVy9LoechWLBf9/mrf1dMu47XtU1UN7ismAACAVdR5s6z8O8FNK8RVO0Wnv8su681eV3Zt0ecm8+fjqIqzql/b3aObxNBk1+i6OasSYbtGAwAAQ9XLrtF9L5NedAUYAACAo2vplkanlUpLdQEAAJiHmSvCAAAAsEqWriIMAAAA8yQRBgAAYFAkwgAAAAyKRBgAAIBBkQgDAAAwKBJhAAAABkUiDAAAwKBIhAEAABgUiTAAAACD8h+E9QzYI5DO7AAAAABJRU5ErkJggg==" alt="1622443003736"></p> <p><strong>总结：</strong> 我们可以使用vuecli根据自己项目需求创建合适的项目。</p> <h3 id="_04-调整目录"><a href="#_04-调整目录" class="header-anchor">#</a> 04-调整目录</h3> <blockquote><p>目标：根据项目功能调整下目录结构</p></blockquote> <p>大致步骤：</p> <ul><li>配置文件解释说明</li> <li>调整src下目录结构</li></ul> <p>落地内容：</p> <ul><li>根目录和配置文件。都是自动生成的，了解作用即可</li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>├─node_modules
├─public
├─src
├─.browserslistrc     # 适配浏览器列表
├─.editorconfig       # 提供给编辑器的配置
├─.eslintrc.js        # eslint代码风格配置
├─.gitignore          # git忽略文件配置
├─.babel.config.js    # babelES降级配置
├─package-lock.json   # 包下载版本说明文件
├─package.json        # 项目包说明文件
├─postcss.config.js   # postcss，css预处理器后处理器配置
├─README.md           # 说明MD文件
└─vue.config.js       # vue-cli的配置文件
</code></pre></div><ul><li>src 目录结构如下，仅供参考 （分模块的思维才重要）</li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>├─api              # 接口函数
├─assets           # 项目资源
│  ├─images          # 图片 
│  └─styles          # less代码
├─components       # 全局组件，通用组件
├─router           # 路由
├─store            # 状态
├─utils            # 工具
└─views            # 路由组件（页面）
    ├─article        # 文章详情
    ├─home           # 首页
    ├─question       # 问答
    ├─user           # 用户模块
    └─video          # 视频
</code></pre></div><p><strong>总结：</strong> 做好开发前的准备，调整下项目结构。</p> <h2 id="第二章-项目架构"><a href="#第二章-项目架构" class="header-anchor">#</a> 第二章：项目架构</h2> <h3 id="_01-引入vant"><a href="#_01-引入vant" class="header-anchor">#</a> 01-引入vant</h3> <blockquote><p>目的：在项目中引入Vant组件库</p></blockquote> <p>大致步骤：</p> <ul><li>从官方了解引入Vant的几种方式 	<a href="https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart#yin-ru-zu-jian" target="_blank" rel="noopener noreferrer">引入vant方式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>自动按需（推荐）- 打包体积小</li> <li>手动按需</li> <li>全部引入</li></ul></li> <li>我们采用 <strong>全部引入</strong> 方式
<ul><li>开发过程中使用方便，一次引入全局使用。</li> <li>后续做打包优化可以降低打包体积。</li></ul></li></ul> <p>落地代码：</p> <ul><li>安装</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i vant
</code></pre></div><ul><li>引入 <code>main.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vant <span class="token keyword">from</span> <span class="token string">'vant'</span>
<span class="token keyword">import</span> <span class="token string">'vant/lib/index.css'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vant<span class="token punctuation">)</span>
</code></pre></div><ul><li>测试  <code>App.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="1622513783623"></p> <p><strong>总结：</strong> 如果后续不做打包优化 <code>自动按需引入</code> 推荐，但是我们为了开发方便后续也会做打包优化使用 <code>全部引入</code> 方式。</p> <h3 id="_02-适配单位"><a href="#_02-适配单位" class="header-anchor">#</a> 02-适配单位</h3> <blockquote><p>目标：了解移动端适配方案，实现这些适配方案用到的尺寸单位。</p></blockquote> <p>大致步骤：</p> <ul><li>回忆下移动端<strong>等比例</strong>适配的单位，rem 或者 vw+vh</li> <li>在项目中使用 <code>vw</code> 来演示下适配的过程</li> <li>总结 <code>vw</code> 单位在做适配的方法</li></ul> <p>落地过程：</p> <ul><li>rem适配，vw适配</li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>// 目标：等比例适配
// 1. iphone6  375px 盒子 100*100 
// 2. iphone6 plus  414px 盒子  110.4*110.4

// rem适配
// 1. iphone6  html===&gt;font-size:37.5px
// 2. iphone6 plus  html===&gt;font-size:41.4px
// 3. height:2.666rem; width:2.666rem;

// vw适配
// 1. height: 26.667vw; width: 26.667vw;
</code></pre></div><ul><li>演示 vw 效果</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 26.66667vw<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 26.66667vw<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>总结下方案，设备宽度是 <code>375px</code> 那么  <code>1vw === 3.75px</code> ，需要将px单位换成vw即可。</li></ul> <p><strong>总结：</strong> 知道如果使用vw换算px单位，实现适配效果。但是手动换算效率太低，下一节来讲如果进行自动适配。</p> <h3 id="_03-进行适配"><a href="#_03-进行适配" class="header-anchor">#</a> 03-进行适配</h3> <blockquote><p>目标：在项目中加入vw的适配方案</p></blockquote> <p>大致步骤：</p> <ul><li>安装 postcss-px-to-viewport 插件</li> <li>新建一个 postcss.config.js 的配置文件</li> <li>添加插件配置 参考 <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/advanced-usage#liu-lan-qi-gua-pei" target="_blank" rel="noopener noreferrer">浏览器适配<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>落地代码：</p> <ul><li>安装</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> postcss-px-to-viewport --save-dev
</code></pre></div><ul><li>配置 <code>postcss.config.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'postcss-px-to-viewport'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">viewportWidth</span><span class="token operator">:</span> <span class="token number">375</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>注意，该插件对行内样式无效，建议样式通过类来定义。</li> <li>postcss 可以认为是后处理器，对css代码做后续的处理 （转单位，加私有前缀..）</li></ul> <p><strong>总结：</strong> 通过postcss-px-to-viewport插件解决移动端适配。</p> <h3 id="_04-约定路由"><a href="#_04-约定路由" class="header-anchor">#</a> 04-约定路由</h3> <blockquote><p>目标：约定好项目的路由设计</p></blockquote> <p>大致步骤：</p> <ul><li>先了解各个页面布局的基本构成</li> <li>再约定好路径和组件的映射关系</li></ul> <p>落地规则：</p> <table><thead><tr><th>路径</th> <th>组件</th> <th>功能</th></tr></thead> <tbody><tr><td>/</td> <td>Home+Tabbar</td> <td>首页</td></tr> <tr><td>/question</td> <td>Question+Tabbar</td> <td>问答</td></tr> <tr><td>/video</td> <td>Video+Tabbar</td> <td>视频</td></tr> <tr><td>/user</td> <td>User+Tabbar</td> <td>用户</td></tr> <tr><td>/user/profile</td> <td>UserProfile</td> <td>用户资料</td></tr> <tr><td>/user/chat</td> <td>UserChat</td> <td>小智同学</td></tr> <tr><td>/article</td> <td>Article</td> <td>文章详情</td></tr></tbody></table> <p><strong>总结：</strong> 全部采用一级路由来实现，不使用嵌套路由。（方便后续做组件缓存）</p> <h3 id="_05-命名视图-概念"><a href="#_05-命名视图-概念" class="header-anchor">#</a> 05-命名视图-概念</h3> <blockquote><p>目标：在不使用嵌套路由情况下，如何实现共同布局的复用。</p></blockquote> <p>官方话术： 有时候想同时 (同级) 展示多个视图，而不是嵌套展示，例如创建一个布局，有 <code>sidebar</code> (侧导航) 和 <code>main</code> (主内容) 两个视图，这个时候命名视图就派上用场了。<a href="https://router.vuejs.org/zh/guide/essentials/named-views.html#%E5%B5%8C%E5%A5%97%E5%91%BD%E5%90%8D%E8%A7%86%E5%9B%BE" target="_blank" rel="noopener noreferrer">参考地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>学习步骤：</p> <ul><li>什么是命名视图？
<ul><li>router-view组件有name属性，默认是default，可以指定名称。</li></ul></li> <li>使用场景在哪里？
<ul><li>一个路由规则，可以通过命名视图，指定多个组件，组件是同级的，而不是嵌套关系。</li></ul></li></ul> <p>落地分析：</p> <ul><li>嵌套视图：</li></ul> <p><img src="/geek-document/assets/img/1622534525175.7496e8fa.png" alt="1622534525175"></p> <ul><li>命名视图：</li></ul> <p><img src="/geek-document/assets/img/1622534918577.cb3cf2aa.png" alt="1622534918577"></p> <p><strong>总结：</strong> 在不使用嵌套视图情况下，可以使用命名视图来复用公用的布局内容。</p> <h3 id="_06-命名视图-应用"><a href="#_06-命名视图-应用" class="header-anchor">#</a> 06-命名视图-应用</h3> <blockquote><p>目标：使用命名视图完成项目路由的基本实现。</p></blockquote> <p>大致步骤：</p> <ul><li>定义一个tabbar组件</li> <li>定义 首页 问答 视频 用户 文章详情 等组件</li> <li>使用定义路由规则，使用命名视图，组织页面。</li></ul> <p>落的代码：</p> <p><code>src/components/app-tabbar.vue</code>  底部tab切换组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-tabbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>tab<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppTabbar'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>src/views</code>  中 首页 问答 视频 用户 文章详情 等组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomePage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>question-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>问答<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'QuestionPage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>文章详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticlePage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>用户<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserPage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>视频<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'VideoPage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><code>src/router/index.js</code> 路由规则</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>

<span class="token comment">// 路由懒加载方式</span>
<span class="token keyword">const</span> <span class="token function-variable function">Tabbar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/app-tabbar.vue'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/home'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Question</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/question'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Video</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/video'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/user'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Artcile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/article'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 路由规则</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> Home<span class="token punctuation">,</span> <span class="token literal-property property">tabbar</span><span class="token operator">:</span> Tabbar <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/question'</span><span class="token punctuation">,</span> <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> Question<span class="token punctuation">,</span> <span class="token literal-property property">tabbar</span><span class="token operator">:</span> Tabbar <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/video'</span><span class="token punctuation">,</span> <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> Video<span class="token punctuation">,</span> <span class="token literal-property property">tabbar</span><span class="token operator">:</span> Tabbar <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> User<span class="token punctuation">,</span> <span class="token literal-property property">tabbar</span><span class="token operator">:</span> Tabbar <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/article'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Artcile <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router

</code></pre></div><p><code>App.vue</code>  组织视图</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterView</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterView</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabbar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#app</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token selector">.body</span> <span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span> 
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>
  <span class="token selector">.footer</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 可以使用命名视图再一层路由视图情况下，复用tabbar组件。</p> <h3 id="_07-实现tab栏"><a href="#_07-实现tab栏" class="header-anchor">#</a> 07-实现tab栏</h3> <blockquote><p>目标：使用vant的tabbar组件完成底部tab栏</p></blockquote> <p>大致步骤：</p> <ul><li>先去vant阅读下tabbar组件的模板代码</li> <li>再在app-tabbar.vue组件使用基础用法</li> <li>开启路由功能，指定跳转地址，更改文字。</li></ul> <p>落的代码：</p> <p><code>src/components/app-tabbar.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">route</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-o<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/question<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>问答<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/video<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>friends-o<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>视频<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setting-o<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppTabbar'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> van-tabbar的route是开启路由，van-tabbar-item的to属性是指定跳转地址。图标稍后处理。</p> <h3 id="_08-字体图标"><a href="#_08-字体图标" class="header-anchor">#</a> 08-字体图标</h3> <blockquote><p>目标：掌握如何使用svg的字体图标库iconfont</p></blockquote> <p>大致步骤：</p> <ul><li>在iconfont.com上生成字体图标的js文件</li> <li>在public下index.html头部引入该文件</li> <li>使用固定的svg语法来使用图标</li></ul> <p>落地代码：</p> <ul><li>第一步：在public下index.html头部引入该文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//at.alicdn.com/t/font_2496877_pghtj7rdgrh.js</span>
</code></pre></div><ul><li>第二步：组件中需要加入通用css代码</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>style type<span class="token operator">=</span><span class="token string">&quot;text/css&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">.</span>icon <span class="token punctuation">{</span>
       <span class="token literal-property property">width</span><span class="token operator">:</span> 1em<span class="token punctuation">;</span> 
       <span class="token literal-property property">height</span><span class="token operator">:</span> 1em<span class="token punctuation">;</span>
       vertical<span class="token operator">-</span>align<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">.</span>15em<span class="token punctuation">;</span>
       <span class="token literal-property property">fill</span><span class="token operator">:</span> currentColor<span class="token punctuation">;</span>
       <span class="token literal-property property">overflow</span><span class="token operator">:</span> hidden<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre></div><ul><li>第三步：挑选相应图标并获取类名，应用于页面</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>svg <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon&quot;</span> aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>use xlink<span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">&quot;#icon-xxx&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>use<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
</code></pre></div><p><img src="/geek-document/assets/img/1622601688139.af79f48c.png" alt="1622601688139"></p> <p><strong>总结：</strong> 把字体图标库的js文件引入在index.html，使用svg标签通过类名来指定图标。但是每次这样使用较为麻烦，结构比较多，还有样式，封装成组件。</p> <h3 id="_09-图标组件"><a href="#_09-图标组件" class="header-anchor">#</a> 09-图标组件</h3> <blockquote><p>目的：封装geek-icon组件来使用字体图标</p></blockquote> <p>大致步骤：</p> <ul><li>在components下定义geek-icon组件</li> <li>使用div.geek-icon包裹svg格式代码</li> <li>暴露props属性，name来指定图标</li></ul> <p>落地代码：</p> <ul><li>定义<code>src/components/geek-icon.vue</code></li></ul> <div class="language-VUE extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>geek-icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>use</span> <span class="token attr-name">:xlink:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`#icon-${name}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>use</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'GeekIcon'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token selector">.icon</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> -0.15em<span class="token punctuation">;</span>
    <span class="token property">fill</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>使用</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;home-page&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    首页 &lt;geek-icon style=&quot;font-size:50px;color:green&quot; name=&quot;weixin&quot;&gt;&lt;/geek-icon&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import GeekIcon from '@/components/geek-icon'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomePage',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { GeekIcon }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">style scoped lang=&quot;less&quot;&gt;&lt;/style&gt;
</span></span></code></pre></div><p><strong>总结：</strong> 使用geek-icon组件name是图标名称，不需要加上icon。geek-icon的颜色和字体大小可控制图标颜色。</p> <p><strong>注意：</strong> weixin图标才可以测试改颜色，其他图标没有放开颜色的设置，需要去iconfont上进行设置。</p> <h3 id="_10-vue插件"><a href="#_10-vue插件" class="header-anchor">#</a> 10-Vue插件</h3> <blockquote><p>目标：掌握定义一个vue插件模块</p></blockquote> <p>大致步骤：</p> <ul><li>背景：项目开发过程中会有大量的一些自己写的全局组件，指令，过滤器，原型函数，如果都在main中书写，main的代码就很混乱，不利于维护。</li> <li>插件：可以扩展vue的原有功能在一个独立的js模块中。</li> <li>步骤：
<ul><li>定义一个js模块</li> <li>导出一个对象</li> <li>对象中有一个install属性指向的是一个函数</li> <li>函数的默认参数是 Vue</li> <li>你可以基于Vue做扩展功能</li></ul></li></ul> <p>落地代码：</p> <ul><li>定义插件 <code>src/components/index.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> GeekIcon <span class="token keyword">from</span> <span class="token string">'@/components/geek-icon'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在这里扩展Vue功能</span>
    Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>GeekIcon<span class="token punctuation">.</span>name<span class="token punctuation">,</span> GeekIcon<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>使用插件 <code>src/main.js</code></li></ul> <div class="language-j's extra-class"><pre class="language-text"><code>// 导入插件
import Geek from '@/components'
// 使用插件
Vue.use(Geek)
</code></pre></div><p><strong>总结：</strong> 我们在项目中一般会把 全局组件，过滤器，指令，定义在一个插件模块中。js模块的格式就是一个对象中有install函数即可。</p> <h3 id="_11-改造底部tab"><a href="#_11-改造底部tab" class="header-anchor">#</a> 11-改造底部Tab</h3> <blockquote><p>目标：自定义使用底部tab的图标</p></blockquote> <p>大致步骤：</p> <ul><li>需要使用icon插槽自定义图标</li> <li>需要使用icon插槽的props作用域数据切换图标状态</li> <li>需要使用/deep/来覆盖组件内部样式</li></ul> <p>落地代码：<code>src/components/app-tabbar.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">:border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">route</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props.active ? 'home-sel' : 'home'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/question<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>问答<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props.active ? 'qa-sel' : 'qa'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/video<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>视频<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props.active ? 'video-sel' : 'video'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>我的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props.active ? 'mine-sel' : 'mine'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'GeekTabbar'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-tabbar</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #F7F8FA<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> static<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">/deep/ .van-tabbar-item--active</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #FC6627<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #F7F8FA
<span class="token punctuation">}</span>
<span class="token selector">/deep/ .van-tabbar-item__icon</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">/deep/ .van-tabbar-item__text</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 使用van-tabbar-item的作用域插槽icon可以完成图标自定义和状态切换。</p> <p>样式中用到了几个颜色，这几个颜色是将来其他组件也会大量使用的，建议定义为全局变量。</p> <h3 id="_12-less全局变量"><a href="#_12-less全局变量" class="header-anchor">#</a> 12-Less全局变量</h3> <blockquote><p>目标：定项目的Less全局变量</p></blockquote> <p>大致步骤：</p> <ul><li>注意，如果你将less变量定义在一个less文件中，在使用变量的地方就需要引入这个文件，麻烦。</li> <li>所以，vue-cli考虑到这一点，提供了配置。 <a href="https://cli.vuejs.org/zh/guide/css.html#%E5%90%91%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8-loader-%E4%BC%A0%E9%80%92%E9%80%89%E9%A1%B9" target="_blank" rel="noopener noreferrer">参考配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>落地代码：</p> <ul><li>添加配置 <code>vue.config.js</code>  修改配置文件需要重启项目</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">loaderOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">less</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里定义不需要加@，使用的时候需要加@  </span>
        <span class="token literal-property property">globalVars</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">'geek-color'</span><span class="token operator">:</span> <span class="token string">'#FC6627'</span><span class="token punctuation">,</span>
          <span class="token string-property property">'geek-gray-color'</span><span class="token operator">:</span> <span class="token string">'#F7F8FA'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>使用变量 <code>src/components/app-tabbar.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>.van-tabbar {
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  background: @geek-gray-color;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> position: static;
</span></span>}
/deep/ .van-tabbar-item--active {
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  color: @geek-color;
</span><span class="token prefix inserted">+</span><span class="token line">  background-color: @geek-gray-color
</span></span>}
</code></pre></div><p><strong>总结：</strong> 在vue.config.js中添加配置就可以定义全局需要使用的less变量。</p> <h3 id="_13-vuex管理状态"><a href="#_13-vuex管理状态" class="header-anchor">#</a> 13-Vuex管理状态</h3> <blockquote><p>目标：使用vuex来管理项目中需要共享的数据模块</p></blockquote> <p>大致步骤：</p> <ul><li>定义 <code>user</code> 用户模块，维护用户 token 等信息，且需要同步本地存储。</li> <li>在 store 中使用 <code>user</code> 模块</li></ul> <p>落地代码：</p> <ul><li>user模块 <code>src/store/modules/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 用户模块</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function">state</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">token</span><span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'geek-store-token'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">setToken</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> token</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>token <span class="token operator">=</span> token
      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'geek-store-token'</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>使用模块 <code>src/store/index.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'./modules/user'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    user
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p><strong>总结：</strong>  今后组件间共享的数据由vuex来管理。</p> <h3 id="_14-请求工具-基础"><a href="#_14-请求工具-基础" class="header-anchor">#</a> 14-请求工具-基础</h3> <blockquote><p>目的：为了能单独维护axios的配置，提取一个请求工具模块。</p></blockquote> <p>大致步骤：</p> <ul><li>安装 <code>axios</code> 且导入到文件 <code>src/utils/request.js</code></li> <li>创建一个新的axios实例，配置 <code>baseURL</code> <code>timeout</code></li> <li>导出一个通过新axios实例调用接口的函数，返回值promise</li></ul> <p>落地代码： <code>src/utils/request.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token comment">// 新axios实例</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'http://geek.itheima.net/'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 导出一个新axios实例调用接口的函数，返回值promise</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">'get'</span><span class="token punctuation">,</span> params<span class="token punctuation">,</span> data<span class="token punctuation">,</span> headers <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> method<span class="token punctuation">,</span> params<span class="token punctuation">,</span> data<span class="token punctuation">,</span> headers <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> promise
<span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong> 将来通过导出的函数调接口即可。配置可以统一在这个文件进行维护。</p> <h3 id="_15-请求工具-赋能"><a href="#_15-请求工具-赋能" class="header-anchor">#</a> 15-请求工具-赋能</h3> <blockquote><p>目的：让请求工具能够处理，携带token问题，token失效问题。</p></blockquote> <p>大致步骤：</p> <ul><li>请求头携带token保持登录状态</li> <li>处理token失效问题，跳转登录页面，需要把在哪个页面失效的页面地址传递给登录页面，登录后回跳。</li></ul> <p>落地步骤：</p> <ul><li>请求头携带token保持登录状态</li></ul> <p>导入 <code>vuex</code> 仓库，然后在 请求拦截器  获取token信息，有就修改 <code>config</code> 的配置信息即可。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 请求拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token
  <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>处理token失效问题，跳转登录页面，需要把在哪个页面失效的页面地址传递给登录页面，登录后回跳。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 响应拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>response <span class="token operator">&amp;&amp;</span> err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// token失效</span>
    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/setToken'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login?returnUrl='</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>总结： 我们可以在<code>request.js</code> 配置扩展 axios 功能，处理项目需要的业务。</p> <h3 id="_16-await异常处理"><a href="#_16-await异常处理" class="header-anchor">#</a> 16-await异常处理</h3> <blockquote><p>目的：解决 <code>async await</code> 发请求，处理异常时候多出 <code>try catch</code> 代码块问题。</p></blockquote> <p>大致步骤：</p> <ul><li>使用封装好的请求函数调用接口处理成功和异常，总结 <code>try catch</code>  处理异常的缺点：需要额外的代码。</li> <li>使用 <code>await-to-js</code> 处理promise请求，处理成功和异常情况。</li> <li>优化 <code>request.js</code> 的请求函数，让返回的promise支持 <code>await-to-js</code> 写法。</li></ul> <p>落地代码：</p> <ul><li><ol><li>演示 <code>request.js</code> 调用接口处理成功和异常</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomePage'</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/channels2'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成功'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'失败'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们发现：async await 调用接口，处理异常需要额外加 try catch 的代码块，代码层次增多，不好阅读。</p> <ul><li><ol start="2"><li>使用 <code>await-to-js</code> 配合 <code>request.js</code> 调用接口处理成功和异常</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>
<span class="token keyword">import</span> to <span class="token keyword">from</span> <span class="token string">'await-to-js'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomePage'</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">to</span><span class="token punctuation">(</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/channels'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'失败'</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成功'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们可以将 to 在request.js 工具中就使用，以后就不用每次引入 await-to-js，调用to函数。</p> <ul><li><ol start="3"><li>优化 <code>request.js</code> 代码</li></ol> <ul><li>安装 <code>npm i await-to-js</code></li> <li>导入 <code>import to from 'await-to-js'</code></li> <li>使用</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>export default ({ url, method = 'get', params, data, headers }) =&gt; {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const promise = instance({ url, method, params, data, headers })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  return to(promise)
</span></span>}
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomePage'</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/channels'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'失败'</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成功'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <p><strong>总结：</strong> 使用await-to-js之后，可以通过是否存在 err 判断是否出现异常。不用使用try catch 增加代码。</p> <h3 id="_17-接口api函数"><a href="#_17-接口api函数" class="header-anchor">#</a> 17-接口API函数</h3> <blockquote><p>目的：知道提取API函数的目的，掌握这种套路。</p></blockquote> <p>发现问题：</p> <ul><li>问题：调用一个接口，需要传入：请求地址，请求方式，请求参数，等等。如果这个接口需要在多个组件调用，那么相同的代码需要写多次。</li> <li>解决：将接口的调用再次封装成为一个函数，只暴露请求参数。这样可以提高代码复用。</li></ul> <p>大致步骤：</p> <ul><li>根据接口文档封装一个接口函数</li> <li>再需要数据的组件导入调用函数</li></ul> <p>落的代码：（在首页获取频道信息）</p> <ul><li>定义API函数 <code>src/api/channel.js</code></li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>

<span class="token comment">/**
 * 获取所有频道
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getAllChannels</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/channels'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>调用API函数 <code>src/views/home/index.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getAllChannels <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/channel'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomePage'</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不使用err不写err即可，但是,号需要写</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAllChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong> 以后调用接口，先写API函数，然后再调用API函数获取数据。</p> <h2 id="第三章-登录模块"><a href="#第三章-登录模块" class="header-anchor">#</a> 第三章：登录模块</h2> <h3 id="_01-登录-导航守卫"><a href="#_01-登录-导航守卫" class="header-anchor">#</a> 01-登录-导航守卫</h3> <blockquote><p>目的：访问用户相关页面都需要进行登录，做一个导航守卫进行登录拦截。</p></blockquote> <p>大致步骤：</p> <ul><li>约定好将来用户相关的页面 路由地址以 <code>/user</code> 开头</li> <li>在 <code>src/router/index.js</code>  添加前置导航守卫</li> <li>通过vuex中是否有 <code>token</code> 数据来判断是否登录，进行登录拦截。</li></ul> <p>落的代码： <code>src/router/index.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导航守卫</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token
  <span class="token comment">// 没登录却访问user下的路由</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login?returnUrl='</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 其他情况放行</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>总结：</strong> 使用前置导航守卫拦截未登录却访问用户页面的情况。</p> <h3 id="_02-登录-组件布局"><a href="#_02-登录-组件布局" class="header-anchor">#</a> 02-登录-组件布局</h3> <blockquote><p>目的：完成登录页面基础布局，路由规则配置。</p></blockquote> <p>大致步骤：</p> <ul><li>定义登录组件</li> <li>配置路由规则</li> <li>完成基础布局</li></ul> <p>落的代码：</p> <ul><li>登录组件 <code>src/views/login/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- .native绑定组件的原生事件，属于组件根元素 --&gt;</span>
      <span class="token comment">&lt;!-- $router.back() 返回上一次访问路由，forward go --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>esay-close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>短信登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 表单 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-form</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入手机号<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入验证码<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'LoginPage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.login-page</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 32px<span class="token punctuation">;</span>
  <span class="token selector">.back</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> -15px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 30px 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-cell</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 20px 0<span class="token punctuation">;</span>
    <span class="token selector">&amp;::after</span><span class="token punctuation">{</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-button</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span>#FF9999<span class="token punctuation">,</span>#FFA179<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>路由规则 <code>src/router/index.js</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const Login = () =&gt; import('@/views/login')
</span></span>const routes = [
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  { path: '/login', component: Login }
</span></span>]
</code></pre></div><p><strong>总结：</strong> 注意van-form和van-field是表单结构中的form和input他们需要结合使用。</p> <h3 id="_03-登录-表单校验"><a href="#_03-登录-表单校验" class="header-anchor">#</a> 03-登录-表单校验</h3> <blockquote><p>目标：完成表单项校验和提交时整体校验。</p></blockquote> <p>大致步骤：</p> <ul><li>通过文档了解vant校验的套路</li> <li>完成单个表单项的校验</li> <li>完成提交时整体校验</li></ul> <p>落地代码：</p> <ul><li>根据约定vant文档总结如下：</li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>1. 通过van-field组件的rules属性指定校验规则，校验单个表单项
2. 校验规则具体参考：https://vant-contrib.gitee.io/vant/#/zh-CN/form#rule-shu-ju-jie-gou
3. 通过van-form组件提供的validate函数校验全部表单项
</code></pre></div><ul><li>完成单个表单项校验</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入手机号'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3-9]\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'手机号格式不对'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入手机号'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{6}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'验证码是6个数字'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-HTML extra-class"><pre class="language-html"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入手机号<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.mobile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rules.mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入验证码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rules.code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>完成提交时整体校验</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">login</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'校验成功'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong> 掌握单个表单项验证和整体验证可以完成大部分业务。</p> <h3 id="_04-登录-默认登录"><a href="#_04-登录-默认登录" class="header-anchor">#</a> 04-登录-默认登录</h3> <blockquote><p>目的：能够通过默认246810短信验证码完成登录</p></blockquote> <p>大致步骤：</p> <ul><li>由于短信业务需要接入第三方运营商需要买短信包，所以提供了246810默认的短信验证码。</li> <li>编写登录 API 接口函数</li> <li>使用 手机号 和 默认的短信验证码246810 进行登录</li> <li>成功后存储 token 信息</li></ul> <p>落地代码：</p> <ul><li>编写登录 API 接口函数 <code>src/api/index.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>

<span class="token comment">/**
 * 登录
 * @param {String} mobile - 手机号
 * @param {String} code - 验证码
 * @returns Promise
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">userLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> mobile<span class="token punctuation">,</span> code <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/authorizations'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> mobile<span class="token punctuation">,</span> code <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>使用 手机号 和 默认的短信验证码 进行登录  <code>src/views/login/index.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> userLogin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">login</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 校验</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 登录</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span>
      <span class="token comment">// 失败</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'登录失败'</span><span class="token punctuation">)</span>
      <span class="token comment">// 成功</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>成功后存储 token</li></ul> <p><code>src/views/login/index.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> methods: {
</span><span class="token prefix unchanged"> </span><span class="token line">   async login () {
</span><span class="token prefix unchanged"> </span><span class="token line">     // 校验
</span><span class="token prefix unchanged"> </span><span class="token line">     await this.$refs.form.validate()
</span><span class="token prefix unchanged"> </span><span class="token line">     // 登录
</span><span class="token prefix unchanged"> </span><span class="token line">     const [err, res] = await userLogin(this.form)
</span><span class="token prefix unchanged"> </span><span class="token line">     // 失败
</span><span class="token prefix unchanged"> </span><span class="token line">     if (err) return this.$toast.fail('登录失败')
</span><span class="token prefix unchanged"> </span><span class="token line">     // 成功
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      this.$store.commit('user/setToken', res.data.data.token)
</span><span class="token prefix inserted">+</span><span class="token line">      this.$router.push(this.$route.query.returnUrl || '/')
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p><strong>总结：</strong> 定义API----&gt;调用API-----&gt;得到数据，会是以后的常态。我们存储token是后续会使用的。</p> <h3 id="_05-登录-短信登录"><a href="#_05-登录-短信登录" class="header-anchor">#</a> 05-登录-短信登录</h3> <blockquote><p>目的：完成发送短信验证码登录功能。</p></blockquote> <p>大致步骤：</p> <ul><li>准备 发送验证码 按钮</li> <li>编写发送短信API接口</li> <li>点击 发送验证码 按钮，
<ul><li>判断是否已经发送，</li> <li>校验手机号，</li> <li>调用发送短信API，</li> <li>成功后开启60秒倒计时，不可再次发送</li></ul></li></ul> <p>落地代码：</p> <ol><li>准备 发送验证码 按钮 <code>src/views/login/index.vue</code></li></ol> <div class="language-html extra-class"><pre class="language-html"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入验证码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rules.code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送验证码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code>  <span class="token selector">.send</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #A5A6AB<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol><li>编写发送短信API接口  <code>src/api/index.js</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 发送短信验证码
 * @param {String} mobile - 手机号
 * @returns Promise
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sendMessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">mobile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/v1_0/sms/codes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>点击 发送验证码 按钮，校验手机号，调用发送短信API，成功后开启60秒倒计时，不可再次发送</li></ol> <p><code>src/views/login/index.vue</code></p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token comment">// 倒计时秒数</span>
      <span class="token literal-property property">second</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token comment">// 定时器ID</span>
      <span class="token literal-property property">timer</span><span class="token operator">:</span> <span class="token keyword">null</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{second===0?'发送验证码':`${second}秒后发送`}}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token comment">// 省略.... </span>
	<span class="token keyword">async</span> <span class="token function">send</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 已发送，不做事</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>second <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token comment">// 校验</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'mobile'</span><span class="token punctuation">)</span>
      <span class="token comment">// 发短信</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span>
      <span class="token comment">// 失败</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'发送失败'</span><span class="token punctuation">)</span>
      <span class="token comment">// 成功 倒计时</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>second <span class="token operator">=</span> <span class="token number">60</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>second<span class="token operator">--</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>second <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">&lt;van-field v-model=&quot;form.mobile&quot; name=&quot;mobile&quot;
</span></span></code></pre></div><p><strong>总结：</strong> 对应定时器，最好在销毁组件前清除定时器。</p> <h2 id="第四章-首页模块"><a href="#第四章-首页模块" class="header-anchor">#</a> 第四章：首页模块</h2> <h3 id="_01-首页-频道展示"><a href="#_01-首页-频道展示" class="header-anchor">#</a> 01-首页-频道展示</h3> <blockquote><p>目的：完成首页频道TAB展示</p></blockquote> <p>大致步骤：</p> <ul><li>使用van-tabs组件完成基础结构</li> <li>放置搜索按钮和频道按钮再tab组件右侧</li> <li>获取频道数据，渲染van-tabs组件</li></ul> <p>落地代码：</p> <ul><li>使用van-tabs组件完成基础结构 <code>src/views/home/index.vue</code></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index in 8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>标签 ' + index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    内容 {{ index }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">::v-deep .van-tabs</span> <span class="token punctuation">{</span>
   <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>  
  <span class="token selector">.van-tabs__line</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@geek-color</span><span class="token punctuation">;</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-tab</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #9EA1AE<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-tab--active</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-tabs__wrap</span> <span class="token punctuation">{</span>
    <span class="token property">padding-right</span><span class="token punctuation">:</span> 86px<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-tabs__content</span> <span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-tab__pane</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>放置搜索按钮和频道按钮再van-tabs组件下面，定位到右上角  <code>src/views/home/index.vue</code></li></ul> <div class="language-html extra-class"><pre class="language-html"><code>    <span class="token comment">&lt;!-- 按钮 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.home-page</span> <span class="token punctuation">{</span>
  <span class="token selector">.btn-wrapper</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 86px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
      <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span>
      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> -20px<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">,</span> #fff<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>获取频道数据，渲染van-tabs组件</li></ul> <p><code>src/api/channel.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取我的频道（未登录会返回默认的一些频道）
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getMyChannels</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/user/channels'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>src/views/home/index.vue</code></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">myChannels</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不使用err不写err即可，但是,号需要写</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getMyChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>myChannels <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in myChannels<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        内容 {{ item.id }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 完成tab使用，改造样式布局，获取频道数据，渲染即可。</p> <h3 id="_02-首页-文章组件"><a href="#_02-首页-文章组件" class="header-anchor">#</a> 02-首页-文章组件</h3> <blockquote><p>目的：完成文章列表组件与文章单项组件</p></blockquote> <p>大概步骤：</p> <ul><li>准备文章单项组件</li> <li>准备文章列表组件</li> <li>首页使用文章列表组件</li> <li>首页van-tabs样式修改</li></ul> <p>落的步骤：</p> <ul><li>准备文章单项组件 <code>src/views/home/components/article-item.vue</code></li></ul> <p>1）无图</p> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-item van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title van-multi-ellipsis--l2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>美国强行关闭33家伊朗网站 伊总统办公室警告：不利于伊核谈判<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>小兵张嘎<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>17评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>1天前<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>esay-close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2）三图</p> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-item van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title van-multi-ellipsis--l2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>美国强行关闭33家伊朗网站 伊总统办公室警告：不利于伊核谈判<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://inews.gtimg.com/newsapp_ls/0/13685285688_294195/0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://inews.gtimg.com/newsapp_ls/0/13685285688_294195/0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://inews.gtimg.com/newsapp_ls/0/13685285688_294195/0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>小兵张嘎<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>17评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>1天前<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>esay-close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3）单图，title处加了w66的类名需要注意</p> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-item van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title van-multi-ellipsis--l2 w66<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>美国强行关闭33家伊朗网站 伊总统办公室警告：不利于伊核谈判<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://inews.gtimg.com/newsapp_ls/0/13685285688_294195/0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>小兵张嘎<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>17评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>1天前<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>esay-close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>其他代码</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticleItem'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.article-item</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
    <span class="token property">max-height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
    <span class="token selector">&amp;.w66</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 66%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 112px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 74px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.info</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #A5A6AB<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token selector">span</span> <span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
      <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>准备文章列表组件 <code>src/views/home/components/article-list.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> ArticleItem <span class="token keyword">from</span> <span class="token string">'./article-item.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticleList'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ArticleItem
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.article-list</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>首页使用文章列表组件  <code>src/views/home/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>import { getMyChannels } from '@/api/channel'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import ArticleList from './components/article-list.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomePage',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { ArticleList },
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;van-tabs&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-tab :key=&quot;item.id&quot; v-for=&quot;item in myChannels&quot; :title=&quot;item.name&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;article-list&gt;&lt;/article-list&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;/van-tab&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/van-tabs&gt;
</span></span></code></pre></div><ul><li>首页van-tabs样式修改  <code>src/views/home/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>::v-deep .van-tabs {
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  height: 100%;
</span><span class="token prefix inserted">+</span><span class="token line">  display: flex;
</span><span class="token prefix inserted">+</span><span class="token line">  flex-direction: column;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> .van-tabs__line {
</span><span class="token prefix unchanged"> </span><span class="token line">   background: @geek-color;
</span><span class="token prefix unchanged"> </span><span class="token line">   height: 2px;
</span><span class="token prefix unchanged"> </span><span class="token line">   width: 32px;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span><span class="token prefix unchanged"> </span><span class="token line"> .van-tab {
</span><span class="token prefix unchanged"> </span><span class="token line">   color: #9EA1AE;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span><span class="token prefix unchanged"> </span><span class="token line"> .van-tab--active {
</span><span class="token prefix unchanged"> </span><span class="token line">   font-size: 18px;
</span><span class="token prefix unchanged"> </span><span class="token line">   color: #333;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span><span class="token prefix unchanged"> </span><span class="token line"> .van-tabs__wrap {
</span><span class="token prefix unchanged"> </span><span class="token line">   padding-right: 86px;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  .van-tabs__content {
</span><span class="token prefix inserted">+</span><span class="token line">    flex: 1;
</span><span class="token prefix inserted">+</span><span class="token line">    overflow: hidden;
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span><span class="token prefix inserted">+</span><span class="token line">  .van-tab__pane {
</span><span class="token prefix inserted">+</span><span class="token line">    height: 100%;
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
</code></pre></div><p><strong>总结：</strong> 注意下单图无图三图结构情况，注意下flex布局占满剩余高度产生滚动条。</p> <h3 id="_03-首页-上拉加载"><a href="#_03-首页-上拉加载" class="header-anchor">#</a> 03-首页-上拉加载</h3> <blockquote><p>目的：实现上拉加载效果</p></blockquote> <p>大致步骤：</p> <ul><li>使用van-list组件，知道需要使用属性和事件作用</li> <li>模拟上拉加载效果</li></ul> <p>落地代码：<code>src/views/home/components/article-list.vue</code></p> <ul><li>使用van-list组件，知道需要使用属性和事件作用</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoad()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有更多了<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> ArticleItem <span class="token keyword">from</span> <span class="token string">'./article-item.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticleList'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ArticleItem
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 正在加载</span>
      <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// 数据全部加载完毕</span>
      <span class="token literal-property property">finished</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'上拉加载'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>v-model=&quot;loading&quot;</code> 是加载中状态，控制显示加载中效果，<code>:finished=&quot;finished&quot;</code> 是显示是否完全加载完毕数据，</p> <p><code>@load=&quot;onLoad()&quot;</code> 是上拉加载后事件，当列表最底部进入可视区（能看见列表末尾）就会触发上拉加载事件。</p> <ul><li>模拟上拉加载效果</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, i) in articles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     // 正在加载
</span><span class="token prefix unchanged"> </span><span class="token line">     loading: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 数据全部加载完毕
</span><span class="token prefix unchanged"> </span><span class="token line">     finished: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 文章列表
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      articles: []
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 模拟请求</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 加载完毕</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token comment">// 判断还有没有数据</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>articles<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 设置数据，追加</span>
          <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 设置数据全部加载完毕</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong> 知道van-list的属性和事件，知道加载数据的套路。</p> <h3 id="_04-首页-下拉刷新"><a href="#_04-首页-下拉刷新" class="header-anchor">#</a> 04-首页-下拉刷新</h3> <blockquote><p>目的：实现下拉刷新效果</p></blockquote> <p>大致步骤：<code>src/views/home/components/article-list.vue</code></p> <ul><li>使用 van-pull-refresh 组件，知道需要使用的属性和事件作用</li> <li>模拟下拉刷新效果</li></ul> <p>落地代码：</p> <ul><li>使用 van-pull-refresh 组件，知道需要使用的属性和事件作用</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;van-pull-refresh
</span><span class="token prefix inserted">+</span><span class="token line">      v-model=&quot;refreshing&quot;
</span><span class="token prefix inserted">+</span><span class="token line">      @refresh=&quot;onRefresh&quot;
</span><span class="token prefix inserted">+</span><span class="token line">      success-text=&quot;刷新成功&quot;
</span><span class="token prefix inserted">+</span><span class="token line">    &gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-list
</span><span class="token prefix unchanged"> </span><span class="token line">       v-model=&quot;loading&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       :finished=&quot;finished&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       @load=&quot;onLoad()&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       finished-text=&quot;没有更多了&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;article-item v-for=&quot;i in articles&quot; :key=&quot;i&quot; /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/van-list&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;/van-pull-refresh&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     // 正在加载
</span><span class="token prefix unchanged"> </span><span class="token line">     loading: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 数据全部加载完毕
</span><span class="token prefix unchanged"> </span><span class="token line">     finished: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 文章列表
</span><span class="token prefix unchanged"> </span><span class="token line">     articles: [],
</span><span class="token prefix unchanged"> </span><span class="token line">     // 正在刷新
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      refreshing: false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> methods: {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    onRefresh () {
</span><span class="token prefix inserted">+</span><span class="token line">      console.log('下拉刷新')
</span><span class="token prefix inserted">+</span><span class="token line">    },
</span></span></code></pre></div><p><code>v-model=&quot;refreshing&quot;</code> 是刷新中状态，控制显示刷新中效果，<code>loading-text&quot;</code> 是设置刷新中的提示文字，</p> <p><code>@refresh=&quot;onRefresh()&quot;</code> 是下拉刷新后事件，当用户向下拖动到一定距离后会触发下拉刷新事件。</p> <ul><li>模拟下拉刷新效果</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">onRefresh</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 模拟请求</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 刷新完毕</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>refreshing <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token comment">// 设置数据全部加载完毕为：未加载完</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token comment">// 设置数据，替换</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>articles <span class="token operator">=</span> data
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>需要注意下的是，刷新完毕后需要 将 <code>finished</code> 改成 <code>false</code> 代表还可以继续上拉加载数据，因为重置了列表数据。</p> <p><strong>总结：</strong> 知道 van-pull-refresh 组件 v-model 的作用是控制刷新中状态，@refresh 是监听下拉刷新事件。然后由于重置了数据，需要将列表改成还有更多数据状态。</p> <h3 id="_05-首页-接入数据"><a href="#_05-首页-接入数据" class="header-anchor">#</a> 05-首页-接入数据</h3> <blockquote><p>目的：调用接口获取文章列表真实的数据，完成数据渲染。</p></blockquote> <p>大致步骤：</p> <ul><li>每个频道对应自己的列表，需要传入频道ID给文章列表组件。</li> <li>编写获取文章列表的API接口函数</li> <li>再上拉加载和下拉加载的位置接入真实的接口</li> <li>渲染单项文章组件</li></ul> <p>落地代码：</p> <ul><li>每个频道对应自己的列表，需要传入频道ID给文章列表组件。</li></ul> <p><code>src/views/home/index.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;van-tabs&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-tab :key=&quot;item.id&quot; v-for=&quot;item in myChannels&quot; :title=&quot;item.name&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;article-list :channelId=&quot;item.id&quot;&gt;&lt;/article-list&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;/van-tab&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/van-tabs&gt;
</span></span></code></pre></div><p><code>src/views/home/components/article-list.vue</code></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">channelId</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>编写获取文章列表的API接口函数</li></ul> <p><code>src/api/article.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>

<span class="token comment">/**
 * 根据频道获取频道
 * @param {Number} channelId - 频道ID
 * @param {Number} timestamp - 时间戳
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getArticlesByChannel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">channelId<span class="token punctuation">,</span> timestamp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/articles'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">channel_id</span><span class="token operator">:</span> channelId<span class="token punctuation">,</span>
      timestamp
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在上拉加载和下拉加载的位置接入真实的接口</li></ul> <p><code>src/views/home/components/article-list.vue</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getArticlesByChannel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/article'</span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     // 正在加载
</span><span class="token prefix unchanged"> </span><span class="token line">     loading: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 数据全部加载完毕
</span><span class="token prefix unchanged"> </span><span class="token line">     finished: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 文章列表
</span><span class="token prefix unchanged"> </span><span class="token line">     articles: [],
</span><span class="token prefix unchanged"> </span><span class="token line">     // 正在刷新
</span><span class="token prefix unchanged"> </span><span class="token line">     refreshing: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 时间戳
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      timestamp: Date.now()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token function">onRefresh</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 下拉刷新</span>
      <span class="token comment">// 1. 重置时间戳：回到第一页</span>
      <span class="token comment">// 2. 获取数据</span>
      <span class="token comment">// 3. 重置全部数据加载完成：可以再次加载更多</span>
      <span class="token comment">// 4. 替换当前列表数据戳</span>
      <span class="token comment">// 5. 记录下一次请求的时间</span>
      <span class="token comment">// 6. 结束加刷新操作</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticlesByChannel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>channelId<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>articles <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results
      <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp
      <span class="token keyword">this</span><span class="token punctuation">.</span>refreshing <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 上拉加载</span>
      <span class="token comment">// 1. 获取数据</span>
      <span class="token comment">// 2. 判断下一页是否还有数据：当前时间戳未空，也就是没有更多了</span>
      <span class="token comment">// 2.1 如果有：记录当前的数据时间戳，下一次请求使用</span>
      <span class="token comment">// 2.2 如没有：设置没有更多数据</span>
      <span class="token comment">// 3. 当前列表追加数据   </span>
      <span class="token comment">// 4. 结束上拉加载操作</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticlesByChannel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>channelId<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'加载失败'</span><span class="token punctuation">)</span>  <span class="token comment">// 加载失败</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>渲染单项文章组件</li></ul> <p><code>src/views/home/components/article-list.vue</code> 传入文章信息</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, i) in articles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><code>src/views/home/components/article-item.vue</code> 使用文章信息</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">article</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-item van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title van-multi-ellipsis--l2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{w66: article.cover.type===1}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{article.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(url,i) in article.cover.images<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.aut_name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.comm_count}}评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.pubdate}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>esay-close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 使用传入的频道ID获取数据，在上拉和下拉后等所有的逻辑完成后，结束加载或刷新状态。</p> <h3 id="_06-首页-处理时间"><a href="#_06-首页-处理时间" class="header-anchor">#</a> 06-首页-处理时间</h3> <blockquote><p>目的：把文章发布时间转换为相对时间，例如：2个月内，1分钟内。</p></blockquote> <p>大致步骤：</p> <ul><li>定义一个过滤器，使用过滤器证明可用。</li> <li>然后在过滤中实现转换逻辑，采用 dayjs 时间库处理。
<ul><li>安装导入 dayjs</li> <li>使用 relativeTime 模块转化相对时间</li> <li>使用 locale 默认语言本地化</li></ul></li></ul> <p>落地代码：</p> <ul><li>定义一个过滤器，使用过滤器证明可用。</li></ul> <p><code>src/components/index.js</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> install (Vue) {
</span><span class="token prefix unchanged"> </span><span class="token line">   // 在这里扩展Vue功能
</span><span class="token prefix unchanged"> </span><span class="token line">   Vue.component(GeekIcon.name, GeekIcon)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // 全局注册过滤器
</span><span class="token prefix inserted">+</span><span class="token line">    Vue.filter('relativeTime', (value) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      return '1周内'
</span><span class="token prefix inserted">+</span><span class="token line">    })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><p><code>src/views/home/components/article-item.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.pubdate|relativeTime}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>然后在过滤中实现转换逻辑，采用 dayjs 时间库处理。</li></ul> <p><code>src/components/index.js</code></p> <p>1）安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i dayjs
</code></pre></div><p>2）导入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> dayjs <span class="token keyword">from</span> <span class="token string">'dayjs'</span>
</code></pre></div><p>3）使用 相对时间 插件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> relativeTime <span class="token keyword">from</span> <span class="token string">'dayjs/plugin/relativeTime'</span>
dayjs<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>relativeTime<span class="token punctuation">)</span>
</code></pre></div><p>4）进行时间转换</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // 全局注册过滤器
</span><span class="token prefix unchanged"> </span><span class="token line">   Vue.filter('relativeTime', (value) =&gt; {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      return dayjs(value).toNow()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span></span></code></pre></div><p>5）本地化，语言</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'dayjs/locale/zh-cn'</span>
dayjs<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">'zh-cn'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>总结：</strong> 知道过滤器的注册使用，知道dayjs的基本使用。</p> <h3 id="_07-首页-组件缓存"><a href="#_07-首页-组件缓存" class="header-anchor">#</a> 07-首页-组件缓存</h3> <blockquote><p>目的：首页的状态（当前浏览的频道，频道里头文章）需要保持，当你切换到其他页面时。</p></blockquote> <p>大致步骤：</p> <ul><li>知道如何通过组件缓存来保存组件状态</li> <li>知道如何指定某些组件进行缓存</li> <li>知道如何判断组件确实缓存了</li></ul> <p>落地代码：</p> <p><code>src/App.vue</code></p> <ul><li>使用 keep-alive 来缓存组件</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div id=&quot;app&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;keep-alive&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;RouterView class=&quot;body&quot; /&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;/keep-alive&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;RouterView class=&quot;footer&quot; name=&quot;tabbar&quot; /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span></code></pre></div><p>那么将来 <code>RouterView</code> 动态展示的组件都会被缓存</p> <ul><li>使用 include 来指定需要被缓存的组件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive include<span class="token operator">=</span><span class="token string">&quot;HomePage&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p>属性的值是需要缓存组件的name名称，如果多个组件可以 逗号 分隔 <code>a,b,c</code></p> <ul><li>我们可以通过 devtools 观察组件是否缓存</li></ul> <p><img src="/geek-document/assets/img/1624590995437.410d2b6f.png" alt="1624590995437"></p> <p>看见 inactive 代表当前组件被缓存，或者切换下组件看看组件数据状态是否保存住，还有组件被缓存了再次进入组件是不会触发 created 钩子的这也可以判断。</p> <p><strong>总结：</strong> 知道使用keep-alive组件缓存组件，知道使用include来制定被缓存组件。</p> <h3 id="_08-首页-阅读位置"><a href="#_08-首页-阅读位置" class="header-anchor">#</a> 08-首页-阅读位置</h3> <blockquote><p>目的：组件缓存只会缓存状态数据，而滚动的位置（阅读位置）没有保持，我们需要完成阅读位置保持。</p></blockquote> <p>大致步骤：</p> <ul><li>我们需要知道如何监听：进入组件（激活组件）</li> <li>我们需要在阅读列表的时候记录当前滚动位置</li> <li>我们需要在进入组件的时候还原之前滚动位置</li></ul> <p>落地代码：</p> <p><code>src/views/home/components/article-list.vue</code></p> <ul><li><code>activated</code> 和 <code>deactivated</code> 将会在 <code>keep-alive</code> 树内的所有嵌套组件中触发 <a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>我们需要在阅读列表的时候记录当前滚动位置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token comment">// 阅读位置 (data中申明)</span>
      <span class="token literal-property property">scrollTop</span><span class="token operator">:</span> <span class="token number">0</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ArticleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rememberScroll<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 滚动监听</span>
    <span class="token function">rememberScroll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>ArticleList<span class="token punctuation">.</span>scrollTop
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>我们需要在进入组件的时候还原之前滚动位置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 激活组件</span>
  <span class="token function">activated</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>ArticleList<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollTop
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><strong>注意：</strong> <code>src/views/home/index.vue</code></p> <p>如果当前列表被隐藏，滚动失效，需要设置 animated 有动画的时候，所有列表不会隐藏，激活的时候滚动生效。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">animated</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong>  监听 article-list 的 scroll 事件记录 scrollTop , 然后在组件触发 activated 事件设置 article-list 的 scrollTop 最后注意 van-tabs 加上 animated 属性。</p> <p>先定义API函数，组件中调用即可。</p> <ul><li>van-tabs 组件实现频道</li> <li>van-list 组件实现上拉加载</li> <li>van-pull-refresh 组件实现下拉刷新</li> <li>dayjs relativeTime模块  定义过滤器  处理时间</li> <li>keep-alive vue内置组件做了缓存</li> <li>记录位置，组件激活 activated 还原位置</li></ul> <p>回顾 promise 知识</p> <ul><li>异步操作有回调函数，如果有嵌套，形成逻辑不是特别清楚的代码，回调地狱</li> <li>promise 可以解决回调地狱问题，可以让异步操作使用then串联执行</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// promise</span>
<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'url1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'url2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>async await 可以让promise的代码更加简洁</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> getData <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&gt;</span><span class="token punctuation">{</span>
 <span class="token keyword">await</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'url1'</span><span class="token punctuation">)</span>
 <span class="token keyword">await</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'url2'</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre></div><h2 id="第五章-频道管理"><a href="#第五章-频道管理" class="header-anchor">#</a> 第五章：频道管理</h2> <h3 id="_01-频道-组件准备"><a href="#_01-频道-组件准备" class="header-anchor">#</a> 01-频道-组件准备</h3> <blockquote><p>目的：定义频道管理组件，准备一个弹出层组件，在首页组件使用频道管理组件。</p></blockquote> <p>大致步骤：</p> <ul><li>了解 van-popup 组件基本用法</li> <li>定义频道管理组件，使用van-popup组件，修改样式</li> <li>在首页组件使用频道管理组件
<ul><li>实现:value来控制van-popup的显示</li> <li>实现@input来控制van-popup的隐藏</li> <li>简写成v-model</li></ul></li></ul> <p>落地代码：</p> <ul><li>了解 van-popup 组件基本用法 <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/popup#api" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>1. v-model 或者 value 控制 弹出层显示和隐藏，值类型 true false
2. position 弹出的位置 left top bottom right
3. closeable 是否显示关闭图标
4. 事件 click-close-icon 点击关闭按钮的事件
5. 弹层大小，图标大小，使用样式覆盖控制
</code></pre></div><ul><li>定义频道管理组件，使用van-popup组件，修改样式</li></ul> <p>定义组件  <code>src/views/home/components/article-channel.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span>
    <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click-close-icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit('input', false)<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">closeable</span>
    <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-channel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      频道管理
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticleChannel'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-popup</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token selector">::v-deep .van-popup__close-icon</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.article-channel</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用组件 <code>src/views/home/index.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import ArticleChannel from './components/article-channel.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomePage',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { ArticleList, ArticleChannel },
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 按钮 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;btn-wrapper&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;geek-icon name=&quot;search&quot;&gt;&lt;/geek-icon&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;geek-icon name=&quot;channel&quot; @click.native=&quot;showChannel=true&quot;&gt;&lt;/geek-icon&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 频道 --&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;article-channel v-model=&quot;showChannel&quot;&gt;&lt;/article-channel&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     myChannels: [],
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      // 控制频道组件显示隐藏
</span><span class="token prefix inserted">+</span><span class="token line">      showChannel: false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><p><strong>总结：</strong> 封装频道管理组件，实现v-model指令，控制van-popup显示隐藏。</p> <h3 id="_02-频道-组件布局"><a href="#_02-频道-组件布局" class="header-anchor">#</a> 02-频道-组件布局</h3> <blockquote><p>目的：完成频道组件的基础布局，了解需要动态交互的点。</p></blockquote> <p>大致步骤：</p> <ul><li>准备HTML结构</li> <li>准备CSS样式</li> <li>了解动态修改的类名</li></ul> <p>落地代码：<code>src/views/home/components/article-channel.vue</code></p> <ul><li>准备HTML结构</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;van-popup
</span><span class="token prefix unchanged"> </span><span class="token line">   :value=&quot;value&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   @click-close-icon=&quot;$emit('input', false)&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   closeable
</span><span class="token prefix unchanged"> </span><span class="token line">   position=&quot;left&quot;
</span><span class="token prefix unchanged"> </span><span class="token line"> &gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;div class=&quot;article-channel&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;div class=&quot;head&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;h3&gt;我的频道&lt;small&gt;点击进入频道&lt;/small&gt;&lt;/h3&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;a class=&quot;edit&quot; href=&quot;javascript:;&quot;&gt;编辑&lt;/a&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/div&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;div class=&quot;body&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;a href=&quot;javascript:;&quot; class=&quot;active&quot;&gt;推荐&lt;/a&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;a href=&quot;javascript:;&quot; v-for=&quot;i in 8&quot; :key=&quot;i&quot;&gt;频道{{i}}&lt;/a&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/div&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;div class=&quot;head&quot; style=&quot;margin-top:12px&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;h3&gt;频道推荐&lt;/h3&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/div&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;div class=&quot;body&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;a href=&quot;javascript:;&quot; v-for=&quot;i in 15&quot; :key=&quot;i&quot;&gt;+ 频道{{i}}&lt;/a&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/div&gt;
</span><span class="token prefix inserted">+</span><span class="token line">    &lt;/div&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/van-popup&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span></code></pre></div><ul><li>准备CSS样式</li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.article-channel</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
  <span class="token selector">.head</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space<span class="token operator">-</span>between<span class="token punctuation">;</span>
    <span class="token property">justify-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token selector">h3</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token selector">small</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.edit</span> <span class="token punctuation">{</span>
      <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 52px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #DE644B<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 11px<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #DE644B<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token selector">&amp;.active</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> #DE644B<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.body</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 6px 0 16px<span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 8px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span>14px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #3A3948<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #F7F8FA<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
      <span class="token property">min-width</span><span class="token punctuation">:</span> 78px<span class="token punctuation">;</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">&amp;.active</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@geek-color</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>了解动态修改的类名</li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>1. 编辑按钮----点击后----&gt;完成按钮，需要加上active类名
2. 我的频道按钮，如果是当前浏览频道，需要加上active类名
</code></pre></div><p><strong>总结：</strong> 准备好布局，知道 active 类名的作用。</p> <h3 id="_03-频道-渲染我的频道"><a href="#_03-频道-渲染我的频道" class="header-anchor">#</a> 03-频道-渲染我的频道</h3> <blockquote><p>目的：完成我的频道渲染与激活当前浏览频道。</p></blockquote> <p>大致步骤：</p> <ul><li>完成我的频道渲染，数据从首页组件传入。</li> <li>完成当前浏览频道激活，首页组件准备当前浏览频道索引，传人数据给频道组件</li></ul> <p>落地代码：</p> <ul><li>完成我的频道渲染，数据从首页组件传入。</li></ul> <p><code>src/views/home/index.vue</code>  传入我的频道数据</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 频道 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;article-channel
</span><span class="token prefix unchanged"> </span><span class="token line">     v-model=&quot;showChannel&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      :myChannels=&quot;myChannels&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/article-channel&gt;
</span></span></code></pre></div><p><code>src/views/home/components/article-channel.vue</code>  使用我的频道数据</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> props: {
</span><span class="token prefix unchanged"> </span><span class="token line">   value: {
</span><span class="token prefix unchanged"> </span><span class="token line">     type: Boolean,
</span><span class="token prefix unchanged"> </span><span class="token line">     default: false
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    myChannels: {
</span><span class="token prefix inserted">+</span><span class="token line">      type: Array,
</span><span class="token prefix inserted">+</span><span class="token line">      default: () =&gt; []
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;head&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;h3&gt;我的频道&lt;small&gt;点击进入频道&lt;/small&gt;&lt;/h3&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;a class=&quot;edit&quot; href=&quot;javascript:;&quot;&gt;编辑&lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;body&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;a
</span><span class="token prefix inserted">+</span><span class="token line">          href=&quot;javascript:;&quot;
</span><span class="token prefix inserted">+</span><span class="token line">          v-for=&quot;(item,i) in myChannels&quot;
</span><span class="token prefix inserted">+</span><span class="token line">          :key=&quot;item.id&quot;
</span><span class="token prefix inserted">+</span><span class="token line">        &gt;
</span><span class="token prefix inserted">+</span><span class="token line">          {{item.name}}
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;/a&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span></span></code></pre></div><ul><li>完成当前浏览频道激活，首页组件准备当前浏览频道索引，传人数据给频道组件。</li></ul> <p><code>src/views/home/index.vue</code> 浏览频道索引，传给频道组件</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     myChannels: [],
</span><span class="token prefix unchanged"> </span><span class="token line">     showChannel: false,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      activeIndex: 0
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;van-tabs animated v-model=&quot;activeIndex&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-tab :key=&quot;item.id&quot; v-for=&quot;item in myChannels&quot; :title=&quot;item.name&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;article-list :channelId=&quot;item.id&quot;&gt;&lt;/article-list&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/van-tab&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/van-tabs&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 频道 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;article-channel
</span><span class="token prefix unchanged"> </span><span class="token line">     v-model=&quot;showChannel&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      :activeIndex=&quot;activeIndex&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     :myChannels=&quot;myChannels&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/article-channel&gt;
</span></span></code></pre></div><p><code>src/views/home/components/article-channel.vue</code>  使用浏览频道索引</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> props: {
</span><span class="token prefix unchanged"> </span><span class="token line">   value: {
</span><span class="token prefix unchanged"> </span><span class="token line">     type: Boolean,
</span><span class="token prefix unchanged"> </span><span class="token line">     default: false
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   myChannels: {
</span><span class="token prefix unchanged"> </span><span class="token line">     type: Array,
</span><span class="token prefix unchanged"> </span><span class="token line">     default: () =&gt; []
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    activeIndex: {
</span><span class="token prefix inserted">+</span><span class="token line">      type: Number,
</span><span class="token prefix inserted">+</span><span class="token line">      default: 0
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;head&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;h3&gt;我的频道&lt;small&gt;点击进入频道&lt;/small&gt;&lt;/h3&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;a class=&quot;edit&quot; href=&quot;javascript:;&quot;&gt;编辑&lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;body&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;a
</span><span class="token prefix unchanged"> </span><span class="token line">         href=&quot;javascript:;&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          :class=&quot;{active:activeIndex===i}&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         v-for=&quot;(item,i) in myChannels&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         :key=&quot;item.id&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         {{item.name}}
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span></span></code></pre></div><p><strong>总结：</strong>  我的频道和当前浏览频道索引均在首页组件，准备好之后传递给频道组件，使用即可。</p> <h3 id="_04-频道-渲染可选频道"><a href="#_04-频道-渲染可选频道" class="header-anchor">#</a> 04-频道-渲染可选频道</h3> <blockquote><p>目的：完成可选频道的渲染</p></blockquote> <p>大致步骤：</p> <ul><li>知道可选频道数据：就是所有频道除去我的频道剩余频道。</li> <li>获取所有频道数据</li> <li>使用计算属性得到可选频道数据</li> <li>进行数据渲染即可</li></ul> <p>落地代码：<code>src/views/home/components/article-channel.vue</code></p> <ul><li>获取所有频道数据</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">allChannels</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAllChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">getAllChannels</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAllChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>allChannels <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>使用计算属性得到可选频道数据</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可选频道</span>
    <span class="token function">optionalChannels</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在myChannels中找不到的就是可选的</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allChannels<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>myChannels<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>id <span class="token operator">===</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>进行数据渲染即可</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>head<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-top</span><span class="token punctuation">:</span>12px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>频道推荐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in optionalChannels<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+ {{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 使用计算属性，全部频道-我的频道=可选频道。</p> <h3 id="_05-频道-点击进入频道"><a href="#_05-频道-点击进入频道" class="header-anchor">#</a> 05-频道-点击进入频道</h3> <blockquote><p>目的：频道组件点击频道，关闭频道对话框，首页切换到对应频道。技术点掌握sync的使用。</p></blockquote> <p>大致步骤：</p> <ul><li>点击频道将当前的点击按钮索引传递给父组件，父组件接收后修改tabs的值即可完成切换</li> <li>如果传给父组件的事件时 update:属性名称，父组件传值 :属性名称。可以简写 <code>属性名称.sync</code></li></ul> <p>落地代码：</p> <ul><li>完成点击进入频道功能</li></ul> <p><code>src/views/home/components/article-channel.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;a
</span><span class="token prefix unchanged"> </span><span class="token line">         href=&quot;javascript:;&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         :class=&quot;{active:activeIndex===i}&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         v-for=&quot;(item,i) in myChannels&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         :key=&quot;item.id&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          @click=&quot;enterChannel(i)&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &gt;
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 进入频道</span>
    <span class="token function">enterChannel</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 关闭对话框</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token comment">// 传递频道索引</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:activeIndex'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><code>src/views/home/index.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 频道 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;article-channel
</span><span class="token prefix unchanged"> </span><span class="token line">     v-model=&quot;showChannel&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     :myChannels=&quot;myChannels&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     :activeIndex=&quot;activeIndex&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      @update:activeIndex=&quot;activeIndex=$event&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/article-channel&gt;
</span></span></code></pre></div><ul><li><code>.sync</code> 也是一个语法糖，可以简写 <code>:abc=&quot;数据&quot;</code> <code>@update:abc=&quot;数据=$event&quot;</code>  代码，其实这段代码就是实现了双向数据绑定，但是组件不能使用多个<code>v-model</code>，所以提供了 <code>.sync</code> 来简写代码。</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 频道 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;article-channel
</span><span class="token prefix unchanged"> </span><span class="token line">     v-model=&quot;showChannel&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     :myChannels=&quot;myChannels&quot;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      :activeIndex=&quot;activeIndex&quot;
</span><span class="token prefix deleted">-</span><span class="token line">      @update:activeIndex=&quot;activeIndex=$event&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      :activeIndex.sync=&quot;activeIndex&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/article-channel&gt;
</span></span></code></pre></div><p><strong>总结：</strong> 知道 <code>.sync</code> 语法糖作用和简写代码的规则，<code>:abc=&quot;数据&quot;</code> <code>@update:abc=&quot;数据=$event&quot;</code> 。</p> <h3 id="_06-频道-支持本地操作"><a href="#_06-频道-支持本地操作" class="header-anchor">#</a> 06-频道-支持本地操作</h3> <blockquote><p>目的：未登录情况下获取我的频道都是写死的，服务端未提供修改接口，需要本地存储，本地修改。</p></blockquote> <p><img src="/geek-document/assets/img/1625817617182.6c9cd73b.png" alt="1625817617182"></p> <p>大致步骤：</p> <ul><li>按照流程图在 原来的API函数实现</li> <li>修改home组件中调用API函数的地方(因为数据结构会有变化)</li></ul> <p>落地代码：</p> <ul><li>按照流程图在 原来的API函数实现</li></ul> <p><code>src/api/channel.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取我的频道（未登录会返回默认的一些频道）
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getMyChannels</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> localData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'[]'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>localData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 保持和res一样的结构，使用这个API的地方就无需修改</span>
      <span class="token keyword">return</span> localData
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取数据本地缓存</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/user/channels'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 只存数组</span>
      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'v1_0/user/channels'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>修改home组件中调用API函数的地方</li></ul> <p><code>src/views/home/index.vue</code></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不使用err不写err即可，但是,号需要写</span>
    <span class="token keyword">const</span> channels <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getMyChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>myChannels <span class="token operator">=</span> channels
  <span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong> 在API函数完成获取我的频道逻辑业务，降低组件的业务复杂的，提高可复用性。</p> <p><strong>补充：</strong> 登录状态的切换，需要更新频道数据。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'$store.state.user.token'</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> channels <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getMyChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>myChannels <span class="token operator">=</span> channels
      <span class="token keyword">this</span><span class="token punctuation">.</span>activeIndex <span class="token operator">=</span> <span class="token number">0</span>  
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_07-频道-添加"><a href="#_07-频道-添加" class="header-anchor">#</a> 07-频道-添加</h3> <blockquote><p>目的：完成我的频道的添加操作，支持本地和线上。</p></blockquote> <p><img src="/geek-document/assets/img/1625819871732.6ce6e79a.png" alt="1625819871732"></p> <p>大致步骤：</p> <ul><li>按照流程图 定义API函数实现</li> <li>绑定点击事件，调用API函数添加</li></ul> <p>落地代码：</p> <p><code>api/channel.js</code>   API函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 添加频道
 * @param {Array&lt;object&gt;} myChannels - 我的频道集合
 * @param {Number} myChannels.id - 频道ID
 * @param {String} myChannels.name - 频道名称
 * @param {Number} myChannels.seq - 频道名称
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addChannel</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">myChannels</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 获取本地</span>
    <span class="token keyword">const</span> localData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'[]'</span><span class="token punctuation">)</span>
    <span class="token comment">// 2. 最后一项就是需要更新的</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> myChannels<span class="token punctuation">[</span>myChannels<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token comment">// 3. 追加新频道</span>
    localData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 4. 存储本地</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>localData<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/channels'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'put'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">channels</span><span class="token operator">:</span> myChannels <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>views/home/components/article-channel.vue</code>  添加频道</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;head&quot; style=&quot;margin-top:12px&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;h3&gt;频道推荐&lt;/h3&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;body&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;a @click=&quot;addChannel(item)&quot; href=&quot;javascript:;&quot; v-for=&quot;item in optionalChannels&quot; :key=&quot;item.id&quot;&gt;+ {{item.name}}&lt;/a&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 添加频道</span>
    <span class="token keyword">async</span> <span class="token function">addChannel</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 使用重置式添加频道数据，准备重置式的数据</span>
      <span class="token keyword">const</span> newMyChannels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>myChannels<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">c<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          newMyChannels<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> c<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
            <span class="token literal-property property">seq</span><span class="token operator">:</span> i
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      newMyChannels<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>item<span class="token punctuation">,</span> <span class="token literal-property property">seq</span><span class="token operator">:</span> newMyChannels<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 2. 去做添加频道操作</span>
      <span class="token keyword">await</span> <span class="token function">addChannel</span><span class="token punctuation">(</span>newMyChannels<span class="token punctuation">)</span>
      <span class="token comment">// 3. 成功：更新我的频道</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>myChannels<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong>  再添加频道到API函数处理登录和未登录的添加操作，使用重置的方式更新我的频道，需要再点击添加频道按钮后自己组织数据。</p> <h3 id="_08-频道-切换编辑"><a href="#_08-频道-切换编辑" class="header-anchor">#</a> 08-频道-切换编辑</h3> <blockquote><p>目的：显示删除按钮，完成编辑状态切换</p></blockquote> <p>大致步骤：</p> <ul><li>准备删除按钮</li> <li>切换编辑状态</li></ul> <p>落地代码：</p> <ul><li>切换编辑 <code>src/views/home/article-channel.vue</code></li></ul> <p>准备删除按钮（编辑状态，不是推荐，不是当前激活频道，才可以显示）</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> .body {
</span><span class="token prefix unchanged"> </span><span class="token line">   padding: 0 6px 0 16px;
</span><span class="token prefix unchanged"> </span><span class="token line">   a {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      position: relative;
</span><span class="token prefix inserted">+</span><span class="token line">      .geek-icon {
</span><span class="token prefix inserted">+</span><span class="token line">        position: absolute;
</span><span class="token prefix inserted">+</span><span class="token line">        top: -5px;
</span><span class="token prefix inserted">+</span><span class="token line">        right: -5px;
</span><span class="token prefix inserted">+</span><span class="token line">        line-height: 1;
</span><span class="token prefix inserted">+</span><span class="token line">      }
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;a
</span><span class="token prefix unchanged"> </span><span class="token line">         href=&quot;javascript:;&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         :class=&quot;{active:activeIndex===i}&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         v-for=&quot;(item,i) in myChannels&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         :key=&quot;item.id&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         @click=&quot;enterChannel(i)&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         {{item.name}}
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;geek-icon v-show=&quot;isEdit &amp;&amp; i!==0 &amp;&amp; i!== activeIndex&quot; name=&quot;tag-close&quot;&gt;&lt;/geek-icon&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;/a&gt;
</span></span></code></pre></div><p>切换编辑状态（关闭弹出层后，需要改成不编辑状态）</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;head&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;h3&gt;我的频道&lt;small&gt;点击进入频道&lt;/small&gt;&lt;/h3&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;a class=&quot;edit&quot; @click=&quot;isEdit=!isEdit&quot; href=&quot;javascript:;&quot; :class=&quot;{active:isEdit}&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          {{isEdit?'完成':'编辑'}}
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;/a&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     // 全部频道
</span><span class="token prefix unchanged"> </span><span class="token line">     allChannels: [],
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      // 是否编辑
</span><span class="token prefix inserted">+</span><span class="token line">      isEdit: false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;van-popup
</span><span class="token prefix unchanged"> </span><span class="token line">   :value=&quot;value&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   @click-close-icon=&quot;$emit('input', false)&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   closeable
</span><span class="token prefix unchanged"> </span><span class="token line">   position=&quot;left&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    @closed=&quot;isEdit=false&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &gt;
</span></span></code></pre></div><h3 id="_09-频道-删除"><a href="#_09-频道-删除" class="header-anchor">#</a> 09-频道-删除</h3> <blockquote><p>目的：完成我的频道的删除操作，支持本地和线上。</p></blockquote> <p><img src="/geek-document/assets/img/1625821170546.9341d839.png" alt="1625821170546"></p> <p>大致步骤：</p> <ul><li>按照流程图 定义API函数实现</li> <li>绑定点击事件，调用API函数删除</li></ul> <p>落地代码：</p> <ul><li>API函数 <code>api/channel.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 删除频道
 * @param {Number} id - 频道ID
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">delChannel</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 获取本地</span>
    <span class="token keyword">const</span> localData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'[]'</span><span class="token punctuation">)</span>
    <span class="token comment">// 2. 删除频道</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> localData<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
    localData<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">// 3. 存储本地</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>localData<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/channels/'</span> <span class="token operator">+</span> id<span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'delete'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>删除频道 <code>views/home/components/article.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 给组件绑定click事件被认为是自定义事件不会被点击触发，需要加载native表示绑定的是原生事件，需要加上stop阻止事件冒泡触发进入频道的点击 --&gt;</span>
&lt;geek-icon @click.native.stop=&quot;delChannel(item.id)&quot;
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 删除频道</span>
    <span class="token keyword">async</span> <span class="token function">delChannel</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 删除操作</span>
      <span class="token keyword">await</span> <span class="token function">delChannel</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
      <span class="token comment">// 成功：更新我的频道</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>myChannels<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>myChannels<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="第六章-文章详情"><a href="#第六章-文章详情" class="header-anchor">#</a> 第六章：文章详情</h2> <h3 id="_01-文章详情-顶部导航"><a href="#_01-文章详情-顶部导航" class="header-anchor">#</a> 01-文章详情-顶部导航</h3> <blockquote><p>目的：完成文章详情布局，顶部导航</p></blockquote> <p>大致步骤：</p> <ul><li>完成跳转</li> <li>顶部导航</li></ul> <p>落地代码：</p> <ul><li>完成跳转  <code>src/views/home/components/article-item.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-item van-hairline--bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push('/article?id='+article.art_id)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>顶部导航</li></ul> <p><code>src/views/article/index.vue</code>   点击返回按钮回退历史，固定定位，右侧按钮通过right插槽使用，全局样式按钮黑色</p> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span> <span class="token attr-name">left-arrow</span> <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fixed</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ellipsis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5.4vw<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>src/assets/styles/index.less</code></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">// 全局生效的样式
.van-nav-bar .van-icon</span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>src/main.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'@/assets/styles/index.less'</span>
</code></pre></div><h3 id="_02-文章详情-主体内容"><a href="#_02-文章详情-主体内容" class="header-anchor">#</a> 02-文章详情-主体内容</h3> <blockquote><p>目的：完成文章详情布局，标题，时间，作者，内容</p></blockquote> <p>大致步骤：</p> <ul><li>使用基础结构</li> <li>了解结构划分</li></ul> <p>落地代码：</p> <p><code>src/views/article/index.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 文章主体 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 头部：标题 时间 作者 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>第二十二节：Java语言基础-详细讲解位运算符与流程控制语句<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>2019年03月11日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>1186 阅读<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>61 评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span>
              <span class="token attr-name">round</span>
              <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/cat.jpeg<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>黑马先锋<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">round</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#FC6627<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 内容：文章内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我会把书籍分成两类,一类是全面型,一类是犀利型.前面介绍了一本全面型的书籍,接下来介绍的这本的特点是非常犀利,这类书籍的特点是作者能找对重点(2/8原则掌握的很好),在重点位置深入挖掘.这本书的作者John Resig也是JQuery的作者,他显然是个足够犀利的人儿.JQuery从未承诺解决所有问题,但再一些重点部位的突破,让这个类库如此流行.这本书并没有着重介绍JQuery,还是基于原生的JavaScript和DOM API.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>space<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 评论：评论组件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.article-wrapper</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 44px 0 50px<span class="token punctuation">;</span>
  <span class="token comment">// 头部</span>
  <span class="token selector">.header</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>  
    <span class="token selector">.title</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.time</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token selector">span:nth-child(2n)</span> <span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0 5px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> <span class="token operator">-</span>1px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.author</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0 <span class="token punctuation">;</span>
      <span class="token selector">.name</span> <span class="token punctuation">{</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 内容</span>
  <span class="token selector">.main</span> <span class="token punctuation">{</span>
    <span class="token selector">.space</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">@geek-gray-color</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.html</span> <span class="token punctuation">{</span>
      <span class="token property">word-break</span><span class="token punctuation">:</span> break<span class="token operator">-</span>all<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 20px 16px<span class="token punctuation">;</span>
      <span class="token selector">/deep/ img</span> <span class="token punctuation">{</span>
        <span class="token property">max-width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> #f9f9f9<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">/deep/ pre</span> <span class="token punctuation">{</span>
        <span class="token property">white-space</span><span class="token punctuation">:</span> pre<span class="token operator">-</span>wrap<span class="token punctuation">;</span>
        <span class="token selector">code</span> <span class="token punctuation">{</span>
          <span class="token property">white-space</span><span class="token punctuation">:</span> pre<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>src/assets/styles/index.less</code></p> <div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">*</span> <span class="token punctuation">{</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong> article-wrapper容器装：header  main  comment组件</p> <h3 id="_03-文章详情-渲染页面"><a href="#_03-文章详情-渲染页面" class="header-anchor">#</a> 03-文章详情-渲染页面</h3> <blockquote><p>目的：获取文章详情数据进行渲染   <em>7974 这个文章数据不错哦</em></p></blockquote> <p>大致步骤：</p> <ul><li>定义API接口函数</li> <li>定义数据，获取数据</li> <li>渲染页面</li></ul> <p>落地代码：</p> <ul><li>定义API接口函数  <code>src/api/article.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取文章详情
 * @param {String} id - 文章ID
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getArticle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/articles/'</span> <span class="token operator">+</span> id
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>定义数据，获取数据 <code>src/views/article/index.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getArticle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/article'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticlePage'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">article</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getArticle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">getArticle</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>article <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>渲染页面 <code>src/views/article/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 文章主体 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 头部：标题 时间 作者 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{article.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.pubdate}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.read_count}} 阅读<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.comm_count}} 评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">round</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.aut_photo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{article.aut_name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">round</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#FC6627<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+ 关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 内容：文章内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>space<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 评论：评论组件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong>  富文本内容使用v-html渲染</p> <h3 id="_04-文章详情-导航交互"><a href="#_04-文章详情-导航交互" class="header-anchor">#</a> 04-文章详情-导航交互</h3> <blockquote><p>目的：完成在滚动页面时候，头部被卷起后，在顶部导航显示作者信息。</p></blockquote> <p>大致步骤：</p> <ul><li>准备顶部导航作者信息</li> <li>监听滚动，显示隐藏作者信息</li></ul> <p>落地代码：</p> <ul><li>准备顶部导航作者信息 <code>src/views/article/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 导航 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;van-nav-bar left-arrow @click-left=&quot;$router.back()&quot; fixed&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;template #title&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;div class=&quot;nav-author&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;van-image round width=&quot;7vw&quot; height=&quot;7vw&quot; :src=&quot;article.aut_photo&quot;/&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;span class=&quot;name&quot;&gt;{{article.aut_name}}&lt;/span&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;span class=&quot;line&quot;&gt;|&lt;/span&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;span class=&quot;follow&quot;&gt;关注&lt;/span&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;/div&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;template #right&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;van-icon name=&quot;ellipsis&quot; size=&quot;5.4vw&quot;&gt;&lt;/van-icon&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/template&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/van-nav-bar&gt;
</span></span></code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">/deep/ .van-nav-bar__title</span> <span class="token punctuation">{</span>
   <span class="token property">max-width</span><span class="token punctuation">:</span> 270px<span class="token punctuation">;</span>
   <span class="token property">width</span><span class="token punctuation">:</span> 270px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.nav-author</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> flex<span class="token operator">-</span>start<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token selector">&gt; span</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.line</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> <span class="token operator">-</span>1px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.follow</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@geek-color</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>监听滚动，显示隐藏作者信息  <code>src/views/article/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 文章主体 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-wrapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onScroll<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 头部：标题 时间 作者 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">article</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">showNavAuthor</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 监听滚动</span>
    <span class="token function">onScroll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> scrollTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>wrapper<span class="token punctuation">.</span>scrollTop
      <span class="token keyword">const</span> headerHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>header<span class="token punctuation">.</span>offsetHeight
      <span class="token keyword">this</span><span class="token punctuation">.</span>showNavAuthor <span class="token operator">=</span> scrollTop <span class="token operator">&gt;</span> headerHeight
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav-author<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showNavAuthor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong>  通过ref获取wrapper的卷起高度 比较  header的高度，大于就显示头部导航的作者信息</p> <h3 id="_05-文章详情-关注作者"><a href="#_05-文章详情-关注作者" class="header-anchor">#</a> 05-文章详情-关注作者</h3> <blockquote><p>目的：完成关注作者和取消关注功能</p></blockquote> <p>大致步骤：</p> <ul><li>定义关注作者和取消关注的API接口函数</li> <li>绑定点击事件，完成关注和取消关注操作</li> <li>切换关注按钮的显示</li></ul> <p>落地代码：</p> <ul><li>API接口函数  <code>src/api/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 关注 和 取消关注
 * @param {*} authorId - 作者ID
 * @param {*} isFollow - 是否关注
 * @returns Promise
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">followAuthor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">authorId<span class="token punctuation">,</span> isFollow</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isFollow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/followings'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> authorId <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/followings/'</span> <span class="token operator">+</span> authorId<span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'delete'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>组件中处理：关注 和 取消关注   <code>src/views/article/index.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 关注&amp;取消关注</span>
    <span class="token keyword">async</span> <span class="token function">followAuthor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> newStatus <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>is_followed
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">followAuthor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>aut_id<span class="token punctuation">,</span> newStatus<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'操作失败'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>newStatus <span class="token operator">?</span> <span class="token string">'关注成功'</span> <span class="token operator">:</span> <span class="token string">'取消关注'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>is_followed <span class="token operator">=</span> newStatus
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>切换按钮</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>          <span class="token operator">&lt;</span>span @click<span class="token operator">=</span><span class="token string">&quot;followAuthor()&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;follow&quot;</span> <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{un:article.is_followed}&quot;</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token punctuation">{</span>article<span class="token punctuation">.</span>is_followed<span class="token operator">?</span><span class="token string">'取消关注'</span><span class="token operator">:</span><span class="token string">'关注'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.is_followed<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>followAuthor()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>取消关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">v-else</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>followAuthor()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#FC6627<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+ 关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> .follow {
</span><span class="token prefix unchanged"> </span><span class="token line">   color: @geek-color;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // 不加&amp;  .follow .un   后代选择器
</span><span class="token prefix inserted">+</span><span class="token line">    // 加上&amp;  .follow.un    交集选择器
</span><span class="token prefix inserted">+</span><span class="token line">    &amp;.un {
</span><span class="token prefix inserted">+</span><span class="token line">      color: #999;
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><h3 id="_06-文章详情-骨架效果"><a href="#_06-文章详情-骨架效果" class="header-anchor">#</a> 06-文章详情-骨架效果</h3> <blockquote><p>目的：在文章加载过程中加上骨架效果</p></blockquote> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAb4AAAMICAYAAAC3gYCoAAAUwklEQVR4nO3dP6h0+V3H8d88XG/CwgPqBoQFlzwQeDpjs4221tqIzYKgWCSN2iSVphALy0QwLBgISEorC0EIJIXddum2MjxBq31UWNi99+KTsbh35pl75vyfmXt+M5/Xq3nuPXPm3FPte7+/OXPO6ub2dl0OtF4ffAgAGG21Ws1+79Uhf1jwAFjCpj9zAjg9fOt1kTsAarANYCmljIzgpPCdbMJ7OK6gAly2bZoOWKpssy6llPV61AQ4KnxHC55pESDatgEtXZkytXUef8QS6GD4Do2ezwEBGGMztW0ccgHLumf66w3f3GiJHQCHWh8Ywa74dYZvcrwOWca0BAoQY86S5pyLWDbva8avNXyTojclWgIHEK+5pLkxJmrbi1hG7Lt9TyN+e+GbEr0x+576SlAAFnakKzSnfMY35SrO+13f7nvVfGHkEfont4lTYCm+ygBwtiYOImO/0jBmeXM9YfrbxO9qd8MYvfuNCZ7lToBobV9p6I3bw75d+0yZ/tbr9X34jhG9ua+17Pz2x/HvAqBCj1I0Yuny7a7TA9f3FYZdo+/c0hmvrgnumMuhAJylR/+dn3BBS98yZ9/y5pj4XR1ygUrr9rkhbOy7/XHsewCoyphpb2/Sa+zbtczZN/0NxW/2nVvatk8K4cNrpYgbwCXqm/a6LnCZGrquyM2+c0vXlTp7gWuL26GTn6kP4GwNTXvNC1xGT3pd29oit163/u3+W5a1bRuK3pQIDr0GwFma+tne7pLn7mttAVyXUlaNqLXFb10aAX4w6ZZlzW1Dv0+O4M4+2x+H9gWgSn1TX99ne12x213qbFv6bI3f2FuWtS5xtkStlFJef/r67UkMHKN96bP1DA4klwDHdeDdWVZl/z/Nq95fd154/Mrmt3e/8u7+cmbb8mZjW/u9Ooe2Naa299//za7TBYCje/XqF6WU/WXPtuXN5rZne0cbs8TZ8TMAPIW+DnV9w2BjL3xDS5a7B/TcPQCW0tujnoFtf+JrHrjrQKIHwNI6utRXqEfhm1JM2QNgab1d6lix7J34Rk17Jj8AntqIJnXVaXCps+0AzW/cA8CTa7nt5ZgqbcM3+GX0xh8a+wcA4BSG7g5zv3m/baMmvnVb7Ex7ACytbeob6NPopc7dP9D8IwCwhDFTX9Oz1p27RsaR2wDglCb1qNG0Z207DxZ0s81yJwBL6WtRzwrltC+wN7bJHgBL6WvR6C+w9/8FmQOgciNaNf17fAIIQG1aru7s0h++vsht11ZHnhQAHMt2nXNEpxqejb2ic+9vjTs1ADiZ0U0a+1gicQPgXHX17NlZxu3NZ+XjH3yz/NW/vV76TAA4M+MubqnpgpY3n5WP/+FPyzc/+rR85TeeL302ANTmVLcsG3Pwo9tE759K+aO//6j85W9fP+3fB6AeM5s0LXwTD35UO9H7g7/7Xvn277z79OcAQH0mNmnc0xlmnckRNaL317/33tJnBEClhpo1aeLrvafnqYgewHI+/6T86Fsflg+/9aPyyedHeu1I5jZp1lLn002Ad+Vn/yh6AEt5/ePvl+/+5JPyyU++W77/08dX0r/+6cjXfnzaK/CnNmneZ3xP6eq6XJf/LJ+e6P8YAOj2/MXL8qKUUt55WT742uNrK9792tfvXysvytf3XvugvHzn/rWXL+q6An/1+RdfNJ5CtN77ue/f//nv/y1f/er7JzzFu/Kzj/6kfOMH/1E++M4/l+/9vqkP4El9/ln5rDwvz9854msH+vnPX5Vf+/VfLavVqpRSBv/d/bn+ia9cl9/6xg/LR3/2onz8N39Y/uJf/mvpEwLI8k5PvOa+tqAzCF8pj+P3Yfn2v4ofAPN0h6+mu7WUUt7G773y798RPwBGaGnZmUx8G434uVcnABOdWfhK2cTvh3/+u+W9525ZBsA0V0ufwDzX5eUf/215ufRpAHB2znDiA4D5hA+AKMIHQJQjhK+2rz0AcPnmt8fEB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARDnKE9j/782bYxwGAE7uKOH75ZtfHuMwAHByRwnf9fWvHOMwAHByPuMDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiHOXpDMdyc3u39Clwob78peulTwGohIkPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKFU9gd1TsgE4NRMfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEOVq6RPYdXN7t/QpAHBCX/7S9dKnYOIDIIvwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgSlVPYK/hybwAXDYTHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgSlU3qb65vVv6FAA4oRoeRmDiAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIEpVT2Cv4cm8AFw2Ex8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIEpVN6m+ub1b+hQAOKEaHkZg4gMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQJSqHkRbwwMKAbhsJj4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyBKVU9nuLm9W/oUADihGp7CY+IDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0CUqh5EW8MDCgG4bCY+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgSlVPZ7i5vVv6FAA4oRqewmPiAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAlKoeRFvDAwoBuGwmPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAlKpuUn1ze7f0KQBwQjU8jMDEB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQJSqnsBew5N5AbhsJj4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQJSqblJ9c3u39CkAcEI1PIzAxAdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0CUqp7AXsOTeQG4bCY+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0CUqm5SfXN7t/QpAHBCNTyMwMQHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAlKqewF7Dk3kBuGwmPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAlKpuUn1ze7f0KQBwQjU8jMDEB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQJSqnsBew5N5AbhsJj4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQJSqblJ9c3u39CkAcEI1PIzAxAdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0CUqp7AXsOTeQG4bCY+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0CUqm5SfXN7t/QpAHBCNTyMwMQHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAlKqewF7Dk3kBuGwmPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAlKpuUn1ze7f0KQDFDeO5bCY+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEqepBtB5+CcCpmfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRhA+AKMIHQBThAyCK8AEQRfgAiCJ8AEQRPgCiCB8AUYQPgCjCB0AU4QMgivABEEX4AIgifABEET4AoggfAFGED4AowgdAFOEDIIrwARBF+ACIInwARBE+AKIIHwBRjhC+1eGHAIBJ5rfHxAdAFOEDIIrwARBF+ACIInwARBE+AKJ0h2/lawoAnLmWlpn4AIgifABEET4AoggfAFFmhc9lLwDUYmqTJoWveXABBGApc5s0KnwCB8C5GGrWvM/4fMcPgFpMbNK08DUPLoAALGVmk8aFT+AAOBcDzXomaQAk2Zv4Vh0/A8A56erZs6lrpKvGvwCwlNFN2mlb/2d8fRHcvKaAADy1bfFGdKph9FWd27e70AWA2jy0aUyhxn+dQfAAqN2IVg2Gr+0QPucDYGl9Lerr07O2HR793lbP7ed70gfAQvpatLOt+eqz1jd1BG1qVQHgFCb1qNG02bcsEzwAlja4Qtli3NMZ2oJnmROApbVczbkaumVZ146dbzT1AVCBMdNeW9umf4+vmPoAqEDbtDfibb3h66xp188A8BRGNKmrTo/Ct7e82RwRO34GgCX0dqnjI7xpX2A36QFQk4nTXikDjyXaO2hpXOEpfgAspLdHPSuW+xNfS8z2rorp+BkAnkJfh1qHsp1tV10HXPdtW63Kar3e/v7q1S/29i/rvS37+3RuPNRJDgoQ7ARjTlufWvcbGL4Gljj3wvjFzU17j9rC1dg29HvZiWPvtpZ9tj8O7QtAlabcVaUZsM5tE39v29Y68W12bIasuW21Wj0KWfP3slrdn3jbto22EPqSPMBFa4ta32utk92M6JXSE77NgfeWPJtBbCx7DsauGbpmCHf22/7Yd5IAVGfqPTS7Qjh3Etw7hx294SsPE9z+5pb4ldK6rTd0D/u3hs3UB3Cxhu4A1hnCkdv6jt0fvtK+5Nm1fW+p8+EPtwZw56T2Ts20B3D25jw5Ycrkd79p3D06d111ha15gK74jQ7dmM/2dvbd/th7ZgCcs77P+vpe7/2McCCygxPf7oFaA9m2zLmzvbS91nj9EdMewMWYM/Xd79oTw5mvbVxtdhya+ob2a53+2k5k6OsMpj2AOEOT35h9xt5NbDvxTYlfZ7z6Ps9r7rPRd4ELABdn6MKW1v1nLIe27rtaPV7qHBu/zuXNxuulb5+dfUuZMd2NOU8ATu9E920eM8FNuWf0Zt+9z/hGx68MTH9tJzXmri1juUE2wEWZNLlN2Pd+17f7tt+rc0L8Ri1vNvdtOmYQAaja1Ggd+t6Dblk2cOTxy5s97wWAprmPwZt+y7Kp8Wv5Q3PeDwCHPvO16/2z79wy6w9b0gSgwyFLoHvH6rtzy5QDHDy9DXxpXRQBLtvUrzJMPv7YL7BPOuAppra5X2kAgDJtWpwUvvJw4NkXsQDAEc35HHB6+Fr+oAAC8JQOufDl/wE9FiCCwd2tegAAAABJRU5ErkJggg==" alt="1627201911906" style="zoom:50%;"> <p>大致步骤：</p> <ul><li>定义一个加载中状态数据</li> <li>再请求前改成加载中，请求后改成加载完成</li> <li>根据数据显示骨架效果</li></ul> <p>落地代码：  <code>src/views/article/index.vue</code></p> <ul><li>数据</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     article: {},
</span><span class="token prefix unchanged"> </span><span class="token line">     showNavAuthor: false,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      loading: false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><ul><li>状态设置</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // 文章详情
</span><span class="token prefix unchanged"> </span><span class="token line">   async getArticle () {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      this.loading = true
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     const [, res] = await getArticle(this.$route.query.id)
</span><span class="token prefix unchanged"> </span><span class="token line">     this.article = res.data.data
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      this.loading = false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span></span></code></pre></div><ul><li>骨架效果</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 骨架组件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-skeleton<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-skeleton</span> <span class="token attr-name">title</span> <span class="token attr-name">:row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>12<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 文章主体 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-wrapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onScroll<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.article-skeleton</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_07-文章详情-代码高亮"><a href="#_07-文章详情-代码高亮" class="header-anchor">#</a> <strong>07-文章详情-代码高亮</strong></h3> <blockquote><p>目的：技术类文章，会有code标签写的代码，给代码加上高亮样式</p></blockquote> <img src="/geek-document/assets/img/1627201877382.1097188f.png" alt="1627201877382" style="zoom:50%;"> <p>大致步骤：</p> <ul><li>安装 <code>highlight.js</code> 插件</li> <li>分析使用过程：先有html结构，使用插件给结构加样式。</li> <li>决定封装成指令</li></ul> <p>落地代码：</p> <ul><li>安装</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i highlight.js@10.7.2
</code></pre></div><ul><li>使用分析</li></ul> <p>使用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 文档结构加载完毕事件</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 找到所有的 pre 下的 code  标签</span>
  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'pre code'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 转化成代码结构的html标签</span>
    hljs<span class="token punctuation">.</span><span class="token function">highlightElement</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>风格：</p> <div class="language- extra-class"><pre class="language-text"><code>// 存放风格样式文件目录
geek-client-mobile\node_modules\highlight.js\styles
</code></pre></div><ul><li>指令封装 <code>src/components/index.js</code></li></ul> <p>由于是某一个标签内的结构需要加上样式需要操作dom，而且需要内容渲染完毕后去操作，使用指令比较合适。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> hljs <span class="token keyword">from</span> <span class="token string">'highlight.js'</span>
<span class="token keyword">import</span> <span class="token string">'highlight.js/styles/vs2015.css'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// install函数 定义全局指令</span>
    Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'highlight'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> codeList <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'pre code'</span><span class="token punctuation">)</span>
      codeList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        hljs<span class="token punctuation">.</span><span class="token function">highlightElement</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span> 
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>使用指令   <code>src/views/article/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token comment">&lt;!-- 内容：文章内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-highlight</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>总结：使用自定义指令来实现代码高亮效果。</p> <h2 id="第七章-评论回复"><a href="#第七章-评论回复" class="header-anchor">#</a> 第七章：评论回复</h2> <h3 id="_01-文章评论-组件布局"><a href="#_01-文章评论-组件布局" class="header-anchor">#</a> 01-文章评论-组件布局</h3> <blockquote><p>目的：准备评论回复组件的基础布局结构，了解结构</p></blockquote> <img src="/geek-document/assets/img/1627201821802.9a8a02fc.png" alt="1627201821802" style="zoom:67%;"> <p>大致步骤：</p> <ul><li>准备基础布局结构</li> <li>使用组件</li> <li>分析了解布局结构</li></ul> <p>落地代码：<code>src/views/article/components/article-comment.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 全部评论 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-sticky</span> <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>11.73333vw<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>全部评论 (0)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0 点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-sticky</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 评论列表 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item van-hairline--bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">round</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/cat.jpeg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清风徐来<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>like2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cont<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>说的不错！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>回复 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>van-icon van-icon-arrow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2小时内<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 底部工具 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticleComment'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.article-comment</span> <span class="token punctuation">{</span>
  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token selector">span</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token selector">&amp;:last-child</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.list</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>
    <span class="token selector">.item</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
      <span class="token selector">.info</span> <span class="token punctuation">{</span>
        <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token selector">p</span> <span class="token punctuation">{</span>
          <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token selector">.name</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.zan</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
            <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
            <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
              <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
              <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
              <span class="token property">top</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token selector">&amp;.cont</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
            <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>
            <span class="token property">padding-right</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.reply</span> <span class="token punctuation">{</span>
            <span class="token property">min-width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@geek-gray-color</span><span class="token punctuation">;</span></span>
            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
            <span class="token selector">.van-icon</span> <span class="token punctuation">{</span>
              <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
              <span class="token property">top</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.time</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
            <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>使用组件 <code>src/views/article/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token comment">&lt;!-- 评论：评论组件 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> ArticleComment <span class="token keyword">from</span> <span class="token string">'./components/article-comment.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ArticlePage'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> ArticleComment <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>分析了解布局结构</li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>1. 全部评论，盒子需要滚动到顶部固定定位，使用van-sticky offset-top=&quot;11.73333vw&quot;
2. 评论列表，
3. 底部工具
</code></pre></div><h3 id="_02-文章评论-渲染列表"><a href="#_02-文章评论-渲染列表" class="header-anchor">#</a> 02-文章评论-渲染列表</h3> <blockquote><p>目的：完成文章评论列表上拉加载，渲染列表</p></blockquote> <p>大致步骤：</p> <ul><li>使用van-list组件完成上拉加载效果，初始化就加载一次</li> <li>定义API函数获取文章评论</li> <li>使用API函数获取数据，完成列表渲染</li></ul> <p>落地代码：</p> <ul><li>使用van-list组件完成上拉加载效果 <code>src/views/article/components/article-comment.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 评论列表 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;list&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;van-list v-model=&quot;loading&quot; :finished=&quot;finished&quot; finished-text=&quot;没有评论了&quot; @load=&quot;onLoad&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;div class=&quot;item van-hairline--bottom&quot; v-for=&quot;i in 10&quot; :key=&quot;i&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;van-image round width=&quot;10vw&quot; height=&quot;10vw&quot; src=&quot;https://img01.yzcdn.cn/vant/cat.jpeg&quot;/&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;div class=&quot;info&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;span class=&quot;name&quot;&gt;清风徐来&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;span class=&quot;zan&quot;&gt;0 &lt;geek-icon name=&quot;like2&quot; /&gt;&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;p class=&quot;cont&quot;&gt;说的不错！&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;span class=&quot;reply&quot;&gt;回复 &lt;i class=&quot;van-icon van-icon-arrow&quot;&gt;&lt;/i&gt;&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;span class=&quot;time&quot;&gt;2小时内&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/div&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;/van-list&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">finished</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'加载评论'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>定义API函数获取文章评论 <code>src/api/article.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取文章评论
 * @param {String} articleId - 文章ID
 * @param {String} offset - 上一页数据最后一个ID，做为下一页请求的偏移量
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getCommentsByArticle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">articleId<span class="token punctuation">,</span> offset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/comments'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token literal-property property">source</span><span class="token operator">:</span> articleId<span class="token punctuation">,</span> offset <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>使用API函数获取数据，完成列表渲染</li></ul> <p>传人文章对象 <code>src/views/article/index.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token comment">&lt;!-- 评论：评论组件 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment</span> <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>获取数据 <code>src/views/article/components/article-comment.vue</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getCommentsByArticle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/articles'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">finished</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取数据</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCommentsByArticle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>art_id<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offset<span class="token punctuation">)</span>
      <span class="token comment">// 这次数据最后一条ID和所有数据最后一条ID相同，没有数据了</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>last_id <span class="token operator">===</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>end_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 加载完毕</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 记录偏移量，为下次请求准备</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>offset <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>last_id
      <span class="token punctuation">}</span>
      <span class="token comment">// 追加评论数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>comments<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">)</span>
      <span class="token comment">// 结束加载状态</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>进行渲染列表  <code>src/views/article/components/article-comment.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item van-hairline--bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in comments<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.com_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">round</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.aut_photo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.aut_name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.like_count}}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.is_liking?'like-sel':'like2'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cont<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.content}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.reply_count}}回复 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>van-icon van-icon-arrow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.pubdate|relativeTime}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>渲染总评数量</p> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title van-hairline--bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>全部评论 ({{article.comm_count}})<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.like_count}} 点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_03-文章评论-底部工具"><a href="#_03-文章评论-底部工具" class="header-anchor">#</a> 03-文章评论-底部工具</h3> <blockquote><p>目的：完成底部工具栏的布局和渲染。</p></blockquote> <img src="/geek-document/assets/img/1627201770541.65df13c9.png" alt="1627201770541" style="zoom:67%;"> <p>大致步骤：</p> <ul><li>完成底部工具栏布局，了解结构和样式</li> <li>使用 article 完成渲染</li></ul> <p>落地代码： <code>src/views/article/components/article-comment.vue</code></p> <ul><li>工具栏结构</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 底部工具 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer van-hairline--top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>van-icon van-icon-edit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>like<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>collect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>工具栏样式</li></ul> <div class="language-less extra-class"><pre class="language-less"><code>    <span class="token selector">.footer</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">.input</span> <span class="token punctuation">{</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 34px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">@geek-gray-color</span><span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
      <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token selector">.van-icon</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.btn</span> <span class="token punctuation">{</span>
      <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token selector">p</span> <span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">i</span> <span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">min-width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0 3px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">@geek-color</span><span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> <span class="token operator">-</span>4px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
        <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>完成渲染</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 底部工具 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer van-hairline--top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>van-icon van-icon-edit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.comm_count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{article.comm_count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.attitude===1?'like-sel':'like'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.is_collected?'collect-sel':'collect'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>注意：</strong>  attitude === 1 代表点赞，其他代表未点赞。可以通过dev-tools切换数据，测试状态。</p> <h3 id="_04-文章评论-传送功能"><a href="#_04-文章评论-传送功能" class="header-anchor">#</a> 04-文章评论-传送功能</h3> <blockquote><p>目的：评论按钮滚动到评论区，再次点击回到顶部。</p></blockquote> <img src="/geek-document/assets/img/1627202278994.e4059cd4.png" alt="1627202278994" style="zoom:67%;"> <p>大致步骤：</p> <ul><li>分析：评论区位置 = 头部高度 + 内容高度 ， 组件初始化就需要<strong>加载评论</strong>。</li> <li><code>index.vue</code> 组件操作滚动方便，<code>article-wrapper</code>  是滚动容器</li> <li>点击评论按钮，触发自定义时间，父组件给 <code>article-commont</code> 绑定，进行切换位置</li></ul> <p>落地代码：</p> <ul><li>触发事件  <code>src/views/article/components/article-comment.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;div class=&quot;btn&quot; @click=&quot;$emit('click-comment')&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;geek-icon name=&quot;comment&quot;&gt;&lt;/geek-icon&gt;&lt;p&gt;评论&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;i v-if=&quot;article.comm_count&quot;&gt;{{article.comm_count}}&lt;/i&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span></span></code></pre></div><ul><li>绑定事件  <code>src/views/article/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     article: {},
</span><span class="token prefix unchanged"> </span><span class="token line">     showNavAuthor: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     loading: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 是否滚动到评论位置
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      toComment: false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token comment">&lt;!-- 评论：评论组件 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment</span> <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click-comment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>srollToComment<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token comment">&lt;!-- 内容：文章内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 滚动到评论</span>
    <span class="token function">srollToComment</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> headerHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>header<span class="token punctuation">.</span>offsetHeight
      <span class="token keyword">const</span> mainHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>main<span class="token punctuation">.</span>offsetHeight
      <span class="token comment">// 是否滚动到评论，切换状态</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>toComment <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>toComment
      <span class="token comment">// 来回切换</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>toComment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>wrapper<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> headerHeight <span class="token operator">+</span> mainHeight
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>wrapper<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>默认加载评论(否则页面下面没数据撑开高度，滚动不过去)  <code>src/views/article/components/article-comment.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	
    <span class="token comment">// 开启加载中效果  </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_05-文章评论-点赞"><a href="#_05-文章评论-点赞" class="header-anchor">#</a> 05-文章评论-点赞</h3> <blockquote><p>目的：对文章点赞，取消点赞。</p></blockquote> <p>大致步骤：</p> <ul><li>定义给文章点赞API</li> <li>绑定点击，完成点赞</li></ul> <p>落地代码：</p> <ul><li>API函数 <code>src/api/article.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 点赞文章，取消点赞
 * @param {String} articleId - 文章ID
 * @param {Boolean} isLike - 是否点赞
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">likeArticle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">articleId<span class="token punctuation">,</span> isLike</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLike<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/article/likings'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> articleId <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/article/likings/'</span> <span class="token operator">+</span> articleId<span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'delete'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>处理逻辑 <code>src/views/article/components/article-comment.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>likeArticle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.attitude===1?'like-sel':'like'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import { getCommentsByArticle, likeArticle } from '@/api/articles'
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">likeArticle</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>attitude <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">likeArticle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>art_id<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'操作失败'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>attitude <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">likeArticle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>art_id<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'操作失败'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>attitude <span class="token operator">=</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'操作成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_06-文章评论-收藏"><a href="#_06-文章评论-收藏" class="header-anchor">#</a> 06-文章评论-收藏</h3> <blockquote><p>目标：对文章收藏，取消收藏。</p></blockquote> <p>大致步骤：</p> <ul><li>定义给收藏文章API</li> <li>绑定点击，完成收藏</li></ul> <p>落地代码：</p> <ul><li>API函数 <code>src/api/article.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 收藏文章，取消收藏
 * @param {String} articleId - 文章ID
 * @param {Boolean} isCollect - 是否收藏
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">collectArticle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">articleId<span class="token punctuation">,</span> isCollect</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isCollect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/article/collections'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> articleId <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/article/collections/'</span> <span class="token operator">+</span> articleId<span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'delete'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>处理逻辑</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>collectArticle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.is_collected?'collect-sel':'collect'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import { getCommentsByArticle, likeArticle, collectArticle } from '@/api/articles'
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token function">collectArticle</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">collectArticle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>art_id<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>is_collected<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'操作失败'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>is_collected <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>is_collected
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'操作成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_07-评论回复-回复弹层"><a href="#_07-评论回复-回复弹层" class="header-anchor">#</a> 07-评论回复-回复弹层</h3> <blockquote><p>目的：完成点击回复按钮，弹出回复页面，完成页面布局。</p></blockquote> <img src="/geek-document/assets/img/1627201611235.1ea19cfa.png" alt="1627201611235" style="zoom:50%;"> <p>大致步骤：</p> <ul><li><p>准备弹窗，点击回复切换</p></li> <li><p>完成头部，和底部</p></li> <li><p>完成回复列表</p></li></ul> <p>落地代码： <code>src/views/article/components/article-comment.vue</code></p> <ul><li>准备弹窗</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 回复弹层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply.open<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 头 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span> <span class="token attr-name">left-arrow</span> <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply.open=false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0条回复<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply-wrapper list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 列表 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item van-hairline--bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">round</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/cat.jpeg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清风徐来<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>like2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cont<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>说的不错！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-left</span><span class="token punctuation">:</span>0</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>2小时内<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 底 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer van-hairline--top<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span>static</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input big<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>van-icon van-icon-edit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>collect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geek-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   .input {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &amp;.big {
</span><span class="token prefix inserted">+</span><span class="token line">        width: 260px;
</span><span class="token prefix inserted">+</span><span class="token line">      }
</span></span>


// 最下面加如下样式
.van-popup {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> width: 100%;
</span><span class="token prefix unchanged"> </span><span class="token line"> height: 100%;
</span><span class="token prefix unchanged"> </span><span class="token line"> display: flex;
</span><span class="token prefix unchanged"> </span><span class="token line"> flex-direction: column;
</span></span>}
.reply-wrapper {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> width: 100%;
</span><span class="token prefix unchanged"> </span><span class="token line"> height: 100%;
</span><span class="token prefix unchanged"> </span><span class="token line"> overflow-y: auto;
</span></span>}
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     loading: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     finished: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     offset: null,
</span><span class="token prefix unchanged"> </span><span class="token line">     comments: [],
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // 回复业务需要的数据
</span><span class="token prefix inserted">+</span><span class="token line">      reply: {
</span><span class="token prefix inserted">+</span><span class="token line">        open: false
</span><span class="token prefix inserted">+</span><span class="token line">      }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><ul><li>点击回复打开</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickReply(item)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">clickReply</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 打开评论弹窗</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>open <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_08-评论回复-列表渲染"><a href="#_08-评论回复-列表渲染" class="header-anchor">#</a> 08-评论回复-列表渲染</h3> <blockquote><p>目的：完成评论的回复列表数据获取和渲染</p></blockquote> <p>大致步骤：</p> <ul><li>编写获取回复列表API函数</li> <li>打开对话框记录当前被回复的评论信息对象,打开的时候，需要重置数据</li> <li>使用van-list加载数据，但是不能默认加载，当打开回复对话框</li></ul> <p>落地代码：</p> <ul><li>API函数 <code>src/api/article.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取评论回复
 * @param {String} commentId - 评论ID
 * @param {String} offset - 上一页数据最后一个ID，做为下一页请求的偏移量
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getReplysByComment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">commentId<span class="token punctuation">,</span> offset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/comments'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token literal-property property">source</span><span class="token operator">:</span> commentId<span class="token punctuation">,</span> offset <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>打开对话框  <code>src/views/article/components/article-comment.vue</code></li></ul> <p>1）准备数据</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token comment">// 回复业务需要的数据</span>
      <span class="token literal-property property">currComments</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">reply</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">finished</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
</code></pre></div><p>2）打开组件</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">clickReply</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 记录当前评论</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currComments <span class="token operator">=</span> item
      <span class="token comment">// 打开评论弹窗</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>open <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token comment">// 加载效果</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token comment">// 重置加载完毕</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token comment">// 重置数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token comment">// 重置请求参数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token comment">// 开启加载</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span> <span class="token attr-name">:immediate-check</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply.loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply.finished<span class="token punctuation">&quot;</span></span> <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有回复了<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loadReply<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3）获取数据：</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import { getCommentsByArticle, likeArticle, collectArticle, getReplysByComment } from '@/api/article'
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token function">loadReply</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getReplysByComment</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currComments<span class="token punctuation">.</span>com_id<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>offset<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>end_id <span class="token operator">===</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>last_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>offset <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>last_id
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>reply<span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>4）进行渲染：</p> <div class="language-vue extra-class"><pre class="language-vue"><code>          <span class="token comment">&lt;!-- 列表 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item van-hairline--bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in reply.list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.com_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">round</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10vw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.aut_photo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.aut_name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.like_count}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>like2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cont<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.content}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-left</span><span class="token punctuation">:</span>0</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>{{item.pubdate|relativeTime}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_09-填写文章评论"><a href="#_09-填写文章评论" class="header-anchor">#</a> 09-填写文章评论</h3> <blockquote><p>目的：发表对文章评论</p></blockquote> <p>大致步骤：</p> <ul><li>准备填写文字的弹出框</li> <li>定义API接口函数，点击发表提交评论</li></ul> <p>落地代码：</p> <ul><li>准备填写文字的弹出框   <code>src/views/article/components/article-comment.vue</code></li></ul> <p>1）弹出框</p> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 评论&amp;回复 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showInput<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span> <span class="token attr-name">left-arrow</span> <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showInput=false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>评论文章<span class="token punctuation">&quot;</span></span> <span class="token attr-name">right-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>发表<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">autosize</span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入评论<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">show-word-limit</span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">::v-deep .van-nav-bar__text</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@geek-color</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">::v-deep .van-field__control</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">@geek-gray-color</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 5px 10px<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2）数据</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token comment">// 显示输入弹窗</span>
      <span class="token literal-property property">showInput</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// 输入框值</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">''</span>
</code></pre></div><p>3）打开对话框</p> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 底部工具 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer van-hairline--top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showInput=true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>定义API接口函数，点击发表提交评论，更新数据，关闭对话框</li></ul> <p><code>src/api/article.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 对文章进行评论，对评论进行回复
 * @param {*} target - 评论：文章ID，回复：评论ID
 * @param {*} content - 内容
 * @param {*} articleId - 回复：文章ID
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">commentOrReply</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> content<span class="token punctuation">,</span> articleId <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/comments'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token literal-property property">art_id</span><span class="token operator">:</span> articleId <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>src/views/article/components/article-comment.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-nav-bar
</span><span class="token prefix unchanged"> </span><span class="token line">       left-arrow
</span><span class="token prefix unchanged"> </span><span class="token line">       @click-left=&quot;showInput=false&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       title=&quot;评论文章&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       right-text=&quot;发表&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        @click-right=&quot;submit()&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     /&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code>import {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> getCommentsByArticle,
</span><span class="token prefix unchanged"> </span><span class="token line"> likeArticle,
</span><span class="token prefix unchanged"> </span><span class="token line"> collectArticle,
</span><span class="token prefix unchanged"> </span><span class="token line"> getReplysByComment,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  commentOrReply
</span></span>} from '@/api/articles'
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token function">submit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1. 提交文章评论</span>
        <span class="token comment">// 1.1. 校验是否输入内容</span>
        <span class="token comment">// 1.2. 调用接口</span>
        <span class="token comment">// 1.3. 失败提示</span>
        <span class="token comment">// 1.4. 更新评论列表+更新评论数量+关闭对话框+清除输入内容+成功提示</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$toast</span><span class="token punctuation">(</span><span class="token string">'请输入评论'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">commentOrReply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>art_id<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'评论失败'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>comments<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>new_obj<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>comm_count<span class="token operator">++</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showInput <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'评论成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_10-填写评论回复"><a href="#_10-填写评论回复" class="header-anchor">#</a> 10-填写评论回复</h3> <blockquote><p>目的：发表对评论的回复</p></blockquote> <p>大致步骤：</p> <ul><li>关闭回复列表弹出框清除评论对象，（判断此操作是回复还是评论，根据对象是否有数据）</li> <li>点击发表按钮，在 <code>submit</code> 函数，合并提交回复功能</li></ul> <p>落地代码：</p> <ul><li>关闭回复列表弹出框清除评论对象，动态渲染输入框 placeholder 和 弹出框标题</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 回复弹层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply.open<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@closed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currComments={}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 评论&amp;回复 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;van-popup v-model=&quot;showInput&quot; position=&quot;bottom&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-nav-bar
</span><span class="token prefix unchanged"> </span><span class="token line">       left-arrow
</span><span class="token prefix unchanged"> </span><span class="token line">       @click-left=&quot;showInput=false&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        :title=&quot;currComments.com_id?'回复评论':'评论文章'&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       right-text=&quot;发表&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       @click-right=&quot;submit()&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-field
</span><span class="token prefix unchanged"> </span><span class="token line">       v-model=&quot;text&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       rows=&quot;3&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       autosize
</span><span class="token prefix unchanged"> </span><span class="token line">       type=&quot;textarea&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       maxlength=&quot;100&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        :placeholder=&quot;currComments.com_id?`@${currComments.aut_name}`:'请输入评论'&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       show-word-limit
</span><span class="token prefix unchanged"> </span><span class="token line">     /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/van-popup&gt;
</span></span></code></pre></div><ul><li>合并提交回复功能</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   async submit () {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      if (!this.currComments.com_id) {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       // 1. 提交文章评论
</span><span class="token prefix unchanged"> </span><span class="token line">       // 1.1. 校验是否输入内容
</span><span class="token prefix unchanged"> </span><span class="token line">       // 1.2. 调用接口
</span><span class="token prefix unchanged"> </span><span class="token line">       // 1.3. 失败提示
</span><span class="token prefix unchanged"> </span><span class="token line">       // 1.4. 更新评论列表+更新评论数量+关闭对话框+清除输入内容+成功提示
</span><span class="token prefix unchanged"> </span><span class="token line">       if (!this.text) return this.$toast('请输入评论')
</span><span class="token prefix unchanged"> </span><span class="token line">       const [err, res] = await commentOrReply(this.article.art_id, this.text)
</span><span class="token prefix unchanged"> </span><span class="token line">       if (err) return this.$toast.fail('评论失败')
</span><span class="token prefix unchanged"> </span><span class="token line">       this.comments.unshift(res.data.data.new_obj)
</span><span class="token prefix unchanged"> </span><span class="token line">       this.article.comm_count++
</span><span class="token prefix unchanged"> </span><span class="token line">       this.showInput = false
</span><span class="token prefix unchanged"> </span><span class="token line">       this.text = ''
</span><span class="token prefix unchanged"> </span><span class="token line">       this.$toast.success('评论成功')
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      } else {
</span><span class="token prefix inserted">+</span><span class="token line">        // 2. 提交评论回复
</span><span class="token prefix inserted">+</span><span class="token line">        // 2.1. 校验是否输入内容
</span><span class="token prefix inserted">+</span><span class="token line">        // 2.2. 调用接口
</span><span class="token prefix inserted">+</span><span class="token line">        // 2.3. 失败提示
</span><span class="token prefix inserted">+</span><span class="token line">        // 2.4. 更新回复列表+更新评论数量+更新回复数量+关闭对话框+清除输入内容+成功提示
</span><span class="token prefix inserted">+</span><span class="token line">        if (!this.text) return this.$toast('请输入回复')
</span><span class="token prefix inserted">+</span><span class="token line">        const [err, res] = await commentOrReply(this.currComments.com_id, this.text, this.article.art_id)
</span><span class="token prefix inserted">+</span><span class="token line">        if (err) return this.$toast.fail('回复失败')
</span><span class="token prefix inserted">+</span><span class="token line">        this.reply.list.unshift(res.data.data.new_obj)
</span><span class="token prefix inserted">+</span><span class="token line">        this.article.comm_count++
</span><span class="token prefix inserted">+</span><span class="token line">        this.currComments.reply_count++
</span><span class="token prefix inserted">+</span><span class="token line">        this.showInput = false
</span><span class="token prefix inserted">+</span><span class="token line">        this.text = ''
</span><span class="token prefix inserted">+</span><span class="token line">        this.$toast.success('回复成功')
</span><span class="token prefix inserted">+</span><span class="token line">      }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span></code></pre></div><h2 id="第八章-个人中心"><a href="#第八章-个人中心" class="header-anchor">#</a> 第八章：个人中心</h2> <h3 id="_01-个人中心-基础布局"><a href="#_01-个人中心-基础布局" class="header-anchor">#</a> 01-个人中心-基础布局</h3> <blockquote><p>目的：完成个人中心首页基础布局</p></blockquote> <img src="/geek-document/assets/img/1627210383233.bfdf9a6c.png" alt="1627210383233" style="zoom:67%;"> <p>大致步骤：</p> <ul><li>根据笔记完成布局</li> <li>了解布局结构样式</li></ul> <p>落地代码： <code>src/user/index.vue</code></p> <ul><li>根据笔记完成布局</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>user-page<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">round</span> <span class="token attr-name">fit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/cat.jpeg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清风徐来<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>个人信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arrow<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>动态<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>粉丝<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>被赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-links<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>消息通知
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mycollect<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>我的收藏
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>history<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>阅读历史
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myworks<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>我的作品
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>more<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>更多服务<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>feedback2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>用户反馈
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span>  <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push('/user/chat')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xiaozhi<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>小智同学
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserPage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>less<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.user-page</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.more</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
  <span class="token selector">p</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 15px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-row</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.user</span> <span class="token punctuation">{</span>
  <span class="token selector">&amp;-profile</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>318deg<span class="token punctuation">,</span>#B2B5DB 0%<span class="token punctuation">,</span>#565482 70%<span class="token punctuation">,</span>#494675 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border-bottom-left-radius</span><span class="token punctuation">:</span> 400px 60px<span class="token punctuation">;</span>
    <span class="token property">border-bottom-right-radius</span><span class="token punctuation">:</span> 400px 60px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>
    <span class="token selector">.info</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 40px 0<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 130px<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 3px solid #7674a2<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.name</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.btn</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token selector">.van-icon</span> <span class="token punctuation">{</span>
          <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
          <span class="token property">top</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">p</span> <span class="token punctuation">{</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;-links</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 20px 0<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>了解布局结构样式</li></ul> <div class="language-tex extra-class"><pre class="language-tex"><code>1. info 作者信息
2. van-row 统计信息
3. van-row.user-links 用户信息相关链接
4. .more 更多服务
</code></pre></div><h3 id="_02-个人中心-渲染页面"><a href="#_02-个人中心-渲染页面" class="header-anchor">#</a> 02-个人中心-渲染页面</h3> <blockquote><p>目的：获取当前用户信息渲染页面</p></blockquote> <p>大致步骤：</p> <ul><li>定义API函数</li> <li>组件初始获取数据</li> <li>进行渲染</li></ul> <p>落地代码：</p> <ul><li>定义API函数 <code>src/api/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取当前用户的信息（资料和统计）
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>个人中心组件初始化获取数据 <code>src/views/user/index.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserPage'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取个人信息</span>
    <span class="token keyword">async</span> <span class="token function">getUserInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>进行渲染</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">round</span> <span class="token attr-name">fit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.photo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{user.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>个人信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arrow<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{user.art_count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>动态<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{user.follow_count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{user.fans_count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>粉丝<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{user.like_count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>被赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_03-编辑资料-页面布局"><a href="#_03-编辑资料-页面布局" class="header-anchor">#</a> 03-编辑资料-页面布局</h3> <blockquote><p>目的：完成编辑资料页面布局，了解结构</p></blockquote> <img src="/geek-document/assets/img/1627219161998.c839b80c.png" alt="1627219161998" style="zoom:67%;"> <p>大致步骤：</p> <ul><li>配置路由组件</li> <li>根据笔记完成布局</li> <li>了解布局结构样式</li></ul> <p>落地代码：</p> <ul><li>组件 <code>src/views/user/profile/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>user-profile-page<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span> <span class="token attr-name">left-arrow</span> <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>个人信息<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>头像<span class="token punctuation">&quot;</span></span> <span class="token attr-name">center</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span>
          <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">fit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">round</span>
          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://img01.yzcdn.cn/vant/cat.jpeg<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>昵称<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>清风徐来<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-top</span><span class="token punctuation">:</span>12px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>性别<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>男<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>生日<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2020-10-10<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserProfilePage'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.user-profile-page</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>
  <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.van-cell__title</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.logout</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@geek-color</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>路由 <code>src/router/index.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">UserProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/user/profile'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user/profile'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> UserProfile <span class="token punctuation">}</span>
</code></pre></div><h3 id="_04-编辑资料-回显数据"><a href="#_04-编辑资料-回显数据" class="header-anchor">#</a> 04-编辑资料-回显数据</h3> <blockquote><p>目的，获取个人资料回显页面</p></blockquote> <p>大致步骤：</p> <ul><li>定义API函数</li> <li>组件初始获取数据</li> <li>进行渲染</li></ul> <p>落地代码：</p> <ul><li>定义API函数 <code>src/api/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取当前用户的资料
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/profile'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>组件初始获取数据 <code>src/views/user/profile.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUserProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserProfilePage'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">getUserProfile</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>进行渲染 <code>src/views/user/profile.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;van-cell-group&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;van-cell is-link title=&quot;头像&quot; center&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;van-image
</span><span class="token prefix unchanged"> </span><span class="token line">         slot=&quot;default&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         fit=&quot;cover&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">         round
</span><span class="token prefix unchanged"> </span><span class="token line">         :src=&quot;user.photo&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/van-cell&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;van-cell is-link title=&quot;昵称&quot; :value=&quot;user.name||'未填写'&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/van-cell-group&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;van-cell-group style=&quot;margin-top:12px&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;van-cell is-link title=&quot;性别&quot; :value=&quot;user.gender===0?'男':'女'&quot; /&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;van-cell is-link title=&quot;生日&quot; :value=&quot;user.birthday||'未填写'&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/van-cell-group&gt;
</span></span></code></pre></div><h3 id="_05-编辑资料-退出登录"><a href="#_05-编辑资料-退出登录" class="header-anchor">#</a> 05-编辑资料-退出登录</h3> <blockquote><p>目的：退出登录</p></blockquote> <p>大致步骤：</p> <ul><li>绑定事件</li> <li>处理函数，弹出确认框</li> <li>确认，删除token，跳转首页，提示退出</li></ul> <p>落地代码:</p> <ul><li>绑定事件</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>弹出确认框</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">logout</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$dialog<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'温馨提示'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'您确认退出极客园吗？'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token string">'round-button'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/setToken'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'退出登录'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_06-编辑资料-修改头像"><a href="#_06-编辑资料-修改头像" class="header-anchor">#</a> 06-编辑资料-修改头像</h3> <blockquote><p>目的：点击头像，弹出选项，点击本地上传，完成修改头像</p></blockquote> <p>大致步骤：</p> <ul><li>使用vant的动作面板组件，显示 本地上传  拍照 取消 选项</li> <li>调用本地上传，触发 input type=&quot;file&quot;  的点击事件</li> <li>监听选择文件完成，调用封装号的API上传函数</li> <li>失败提示，成功（更新数据+提示）</li></ul> <p>大致步骤：</p> <ul><li>api函数 <code>src/api/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 修改头像
 * @param {Object} formData -  {photo:'文件数据'}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">updateUserPhoto</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">formData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/photo'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'patch'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> formData
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>点击头像，显示动作面板</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     user: {},
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      // 修改头像相关数据
</span><span class="token prefix inserted">+</span><span class="token line">      showPhoto: false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>头像<span class="token punctuation">&quot;</span></span> <span class="token attr-name">center</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showPhoto=true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 修改头像-弹出层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showPhoto<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ name: '拍照', value: 0 },{ name: '本地选择', value: 1 }]<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onPhotoSelect<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>点击本地上传，调用file输入框</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updatePhoto<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 选择修改头像-动作面板选项</span>
    <span class="token function">onPhotoSelect</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地选择</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showPhoto <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>选择文件后完成上传</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 修改头像</span>
    <span class="token keyword">async</span> <span class="token function">updatePhoto</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 选择图片后的文件信息对象</span>
      <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token comment">// 打开资源管理器，不选选图片，点击取消 file 是空的</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 上传图片</span>
        <span class="token comment">// 1. 包装一个formData对象，字段名字photo指向的是选择的图片</span>
        <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'photo'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>
        <span class="token comment">// 2. 调用API接口</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateUserPhoto</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'修改失败'</span><span class="token punctuation">)</span>
        <span class="token comment">// 3. 显示上传成功的头像，成功提示</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>photo <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>photo
        <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'修改成功'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_07-编辑资料-修改昵称"><a href="#_07-编辑资料-修改昵称" class="header-anchor">#</a> 07-编辑资料-修改昵称</h3> <blockquote><p>目的：调用弹出框修改昵称</p></blockquote> <p>落地代码：</p> <ul><li>准备弹出框</li> <li>定义API函数</li> <li>完成保存</li></ul> <p>落地代码：</p> <ul><li>准备弹出框 <code>src/views/user/profile/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     user: {},
</span><span class="token prefix unchanged"> </span><span class="token line">     // 修改头像相关数据
</span><span class="token prefix unchanged"> </span><span class="token line">     showPhoto: false,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      // 修改用户名称
</span><span class="token prefix inserted">+</span><span class="token line">      showName: false,
</span><span class="token prefix inserted">+</span><span class="token line">      name: ''
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>昵称<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>openNamePopup()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.name||'未填写'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 打开修改名称弹出框</span>
    <span class="token function">openNamePopup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showName <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>name
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 修改昵称 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-popup<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
        <span class="token attr-name">left-arrow</span>
        <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showName=false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">right-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>保存<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>修改昵称<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.my-popup</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token selector">/deep/ .van-nav-bar__text</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@geek-color</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">/deep/ .van-field__control</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">@geek-gray-color</span><span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>API函数 <code>src/api/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 修改用户
 * @param {Object} user - 用户对象
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">updateUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/profile'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'patch'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> user
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>完成保存  <code>src/views/user/profile/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;van-nav-bar
</span><span class="token prefix unchanged"> </span><span class="token line">       left-arrow
</span><span class="token prefix unchanged"> </span><span class="token line">       @click-left=&quot;showName=false&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        @click-right=&quot;saveName()&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       right-text=&quot;保存&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       title=&quot;修改昵称&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     /&gt;
</span></span></code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 保存昵称</span>
    <span class="token keyword">async</span> <span class="token function">saveName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$toast</span><span class="token punctuation">(</span><span class="token string">'请输入昵称'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'更新失败'</span><span class="token punctuation">)</span>
      <span class="token comment">// 更新单元格中的昵称</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
      <span class="token keyword">this</span><span class="token punctuation">.</span>showName <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'更新成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_08-编辑资料-修改性别"><a href="#_08-编辑资料-修改性别" class="header-anchor">#</a> 08-编辑资料-修改性别</h3> <blockquote><p>目的：完成修改性别</p></blockquote> <p>大致步骤：</p> <ul><li>准备动作面板</li> <li>选择后保存</li></ul> <p>大致步骤：</p> <ul><li>准备动作面板</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     user: {},
</span><span class="token prefix unchanged"> </span><span class="token line">     // 修改头像相关数据
</span><span class="token prefix unchanged"> </span><span class="token line">     showPhoto: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 修改用户名称
</span><span class="token prefix unchanged"> </span><span class="token line">     showName: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     name: '',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      // 修改用户性别
</span><span class="token prefix inserted">+</span><span class="token line">      showGender: false
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 修改性别 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showGender<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ name: '男', value: 0 }, { name: '女', value: 1 }]<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>saveGender<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>性别<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showGender=true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.gender===0?'男':'女'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>选择后保存</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 修改用户性别</span>
    <span class="token keyword">async</span> <span class="token function">saveGender</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">gender</span><span class="token operator">:</span> item<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'更新失败'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>gender <span class="token operator">=</span> item<span class="token punctuation">.</span>value
      <span class="token keyword">this</span><span class="token punctuation">.</span>showGender <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'更新成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_09-编辑资料-修改生日"><a href="#_09-编辑资料-修改生日" class="header-anchor">#</a> 09-编辑资料-修改生日</h3> <blockquote><p>目的：完成修改生日</p></blockquote> <p>大致步骤：</p> <ul><li>准备日期选择器组件</li> <li>确认时间后保存生日</li></ul> <p>落地代码：</p> <ul><li>准备日期选择器组件</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     user: {},
</span><span class="token prefix unchanged"> </span><span class="token line">     // 修改头像相关数据
</span><span class="token prefix unchanged"> </span><span class="token line">     showPhoto: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     // 修改用户名称
</span><span class="token prefix unchanged"> </span><span class="token line">     showName: false,
</span><span class="token prefix unchanged"> </span><span class="token line">     name: '',
</span><span class="token prefix unchanged"> </span><span class="token line">     // 修改用户性别
</span><span class="token prefix unchanged"> </span><span class="token line">     showGender: false,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      // 修改生日
</span><span class="token prefix inserted">+</span><span class="token line">      showBirthday: false,
</span><span class="token prefix inserted">+</span><span class="token line">      birthday: new Date(),
</span><span class="token prefix inserted">+</span><span class="token line">      minDate: new Date('1960-01-01'),
</span><span class="token prefix inserted">+</span><span class="token line">      maxDate: new Date()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 修改生日 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showBirthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-datetime-picker</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>选择年月日<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:min-date</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minDate<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:max-date</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxDate<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@cancel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showBirthday=false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>saveBirthday<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">is-link</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>生日<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>openBirthdayPopup<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.birthday||'未填写'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 打开日期选择器</span>
    <span class="token function">openBirthdayPopup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showBirthday <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token comment">// 给日期控件赋值，当前用户的生日</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>birthday<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>确认时间后保存生日</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 修改用户生日</span>
    <span class="token keyword">async</span> <span class="token function">saveBirthday</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 转换格式</span>
      <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>birthday<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">birthday</span><span class="token operator">:</span> date <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'更新失败'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>birthday <span class="token operator">=</span> date
      <span class="token keyword">this</span><span class="token punctuation">.</span>showBirthday <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'更新成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_10-小智同学-基础布局"><a href="#_10-小智同学-基础布局" class="header-anchor">#</a> 10-小智同学-基础布局</h3> <blockquote><p>目的：搭建小智同学的基础布局</p></blockquote> <img src="/geek-document/assets/img/1627227400490.513a51ad.png" alt="1627227400490" style="zoom:67%;"> <p>大致步骤：</p> <ul><li>完成布局</li> <li>了解结构</li> <li>准备用户头像数据</li></ul> <p>落地代码：<code>src/views/user/chat.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-chat-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>小智同学<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 聊天列表 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-item left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xiaozhi<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-pao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是小智同学，需要什么帮助吗？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-item right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-pao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>报名前端<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">fit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAvatar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 输入框 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply-container van-hairline--top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">left-icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请描述您的问题<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> getUserProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserChatPage'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">myAvatar</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token comment">// list: [</span>
      <span class="token comment">//   { name: 'xz', msg: '我是小智同学，需要什么帮助吗？' },</span>
      <span class="token comment">//   { name: 'my', msg: '报名前端' }</span>
      <span class="token comment">// ],</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>myAvatar <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>photo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.user-chat-page</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span>#fff<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 46px 0 50px 0<span class="token punctuation">;</span>
  <span class="token selector">.chat-list</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span>
    <span class="token selector">.chat-item</span><span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token selector">.van-image</span><span class="token punctuation">{</span>
        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.geek-icon</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.chat-pao</span><span class="token punctuation">{</span>
        <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token property">min-width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
        <span class="token property">max-width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>
        <span class="token property">min-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@geek-gray-color</span><span class="token punctuation">;</span></span>
        <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
        <span class="token selector">&amp;::before</span><span class="token punctuation">{</span>
          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
          <span class="token property">background</span><span class="token punctuation">:</span>  <span class="token atrule"><span class="token rule">@geek-gray-color</span><span class="token punctuation">;</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.chat-item.right</span><span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
  <span class="token selector">.chat-pao</span><span class="token punctuation">{</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token selector">&amp;::before</span><span class="token punctuation">{</span>
      <span class="token property">right</span><span class="token punctuation">:</span> -3px<span class="token punctuation">;</span>
      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.chat-item.left</span><span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token selector">.chat-pao</span><span class="token punctuation">{</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token selector">&amp;::before</span><span class="token punctuation">{</span>
      <span class="token property">left</span><span class="token punctuation">:</span> -3px<span class="token punctuation">;</span>
      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-135deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.reply-container</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 49px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 9999<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
  <span class="token selector">&gt; .van-field</span> <span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #F7F8FA<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token selector">::v-deep .van-field__left-icon .van-icon</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&gt; .send</span> <span class="token punctuation">{</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_11-小智同学-认识websocket"><a href="#_11-小智同学-认识websocket" class="header-anchor">#</a> 11-小智同学-认识websocket</h3> <blockquote><p>目的：认识websocket https://websocket.org/</p></blockquote> <p>什么是 websocket ?</p> <ul><li>是一种网络通信协议，和 HTTP 协议 一样。</li></ul> <p>为什么需要websocket ?</p> <ul><li>因为 HTTP 协议有一个缺陷：通信只能由客户端发起。</li></ul> <p>理解 websokect  通讯过程</p> <p><img src="https://www.ruanyifeng.com/blogimg/asset/2017/bg2017051502.png" alt="img"></p> <p>了解 websocket 代码含义 <code>https://websocket.org/echo.html</code> <code>http://jsbin.com/muqamiqimu/edit?js,console</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建ws实例，建立连接</span>
<span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">&quot;wss://echo.websocket.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接成功事件</span>
ws<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connection open ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 发送消息</span>
  ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Hello WebSockets!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 接受消息事件</span>
ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;Received Message: &quot;</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 关闭连接  </span>
  ws<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭连接事件</span>
ws<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connection closed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>      
</code></pre></div><p>我们项目中使用 socket.io-client 来实现客户端代码，它是基于 websocket 的库。</p> <h3 id="_12-小智同学-完成聊天"><a href="#_12-小智同学-完成聊天" class="header-anchor">#</a> 12-小智同学-完成聊天</h3> <blockquote><p>目标：使用socket.io-client完成聊天</p></blockquote> <p>大致步骤：</p> <ul><li>先了解下socket.io-client的使用</li> <li>在组件中实现聊天</li></ul> <p>落地代码：</p> <p>1） 先了解下socket.io-client的使用</p> <ul><li>仓库地址 https://github.com/socketio/socket.io-client</li> <li>官方文档 https://socket.io/   https://socketio.bootcss.com/docs/</li> <li>安装 <code>npm i socket.io-client</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> socketIO <span class="token keyword">from</span> <span class="token string">'socket.io-client'</span>
<span class="token keyword">const</span> io <span class="token operator">=</span> <span class="token function">socketIO</span><span class="token punctuation">(</span><span class="token string">'http:localhost:8080'</span><span class="token punctuation">)</span>
<span class="token comment">// 建立连接</span>
io<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'建立连接'</span><span class="token punctuation">)</span> 
  <span class="token comment">// 发送消息  </span>
  io<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'你好'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 接受消息：data 是后台发的数据</span>
io<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'收到消息'</span><span class="token punctuation">)</span>
  <span class="token comment">// 关闭连接</span>
  io<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>2） 在组件中实现聊天</p> <ul><li>完成列表渲染</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> data () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     myAvatar: '',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      list: [
</span><span class="token prefix inserted">+</span><span class="token line">         { name: 'xz', msg: '我是小智同学，需要什么帮助吗？' },
</span><span class="token prefix inserted">+</span><span class="token line">         { name: 'my', msg: '报名前端' }
</span><span class="token prefix inserted">+</span><span class="token line">      ],
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     value: ''
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 聊天列表 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-item<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,i) in list<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{left:item.name==='xz',right:item.name==='my'}<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geek-icon</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name==='xz'<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xiaozhi<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-pao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name==='my'<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAvatar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>开始聊天</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUserProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span>
<span class="token keyword">import</span> soekctIO <span class="token keyword">from</span> <span class="token string">'socket.io-client'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> baseURL <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserChatPage'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">myAvatar</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// { name: 'xz', msg: '我是小智同学，需要什么帮助吗？' },</span>
        <span class="token comment">// { name: 'my', msg: '我要学前端' }</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>myAvatar <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>photo
    <span class="token comment">// 1. 建立连接</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>io <span class="token operator">=</span> <span class="token function">soekctIO</span><span class="token punctuation">(</span>baseURL<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">transports</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'websocket'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 2. 连接成功</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xz'</span><span class="token punctuation">,</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'我是小智同学，需要什么帮助吗？'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 3. 接收消息</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xz'</span><span class="token punctuation">,</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> data<span class="token punctuation">.</span>msg <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 4. 关闭连接</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">send</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$toast</span><span class="token punctuation">(</span><span class="token string">'请输入内容'</span><span class="token punctuation">)</span>
      <span class="token comment">// 发送消息</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token literal-property property">timestamp</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'my'</span><span class="token punctuation">,</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3）滚动底部：</p> <p><code>$nextTick</code>  等DOM更新完毕执行下一件事情</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // 4. 接收消息
</span><span class="token prefix unchanged"> </span><span class="token line">   this.io.on('message', data =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">     this.list.push({ name: 'xz', msg: data.msg })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      this.scrollBottom()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> beforeDestroy () {
</span><span class="token prefix unchanged"> </span><span class="token line">   // 5. 断开连接
</span><span class="token prefix unchanged"> </span><span class="token line">   this.io.close()
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> methods: {
</span><span class="token prefix unchanged"> </span><span class="token line">   // 3. 发送消息
</span><span class="token prefix unchanged"> </span><span class="token line">   send () {
</span><span class="token prefix unchanged"> </span><span class="token line">     if (!this.value) return this.$toast('请输入内容')
</span><span class="token prefix unchanged"> </span><span class="token line">     // 发消息
</span><span class="token prefix unchanged"> </span><span class="token line">     this.io.emit('message', { msg: this.value, timestamp: Date.now() })
</span><span class="token prefix unchanged"> </span><span class="token line">     // 存聊天记录
</span><span class="token prefix unchanged"> </span><span class="token line">     this.list.push({ name: 'my', msg: this.value })
</span><span class="token prefix unchanged"> </span><span class="token line">     this.value = ''
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      this.scrollBottom()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    scrollBottom () {
</span><span class="token prefix inserted">+</span><span class="token line">      this.$nextTick(() =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">        // 思路：滚动的距离 = 可滚动的高度 - 自身高度
</span><span class="token prefix inserted">+</span><span class="token line">        const scrollHeight = this.$refs.list.scrollHeight
</span><span class="token prefix inserted">+</span><span class="token line">        const offsetHeight = this.$refs.list.offsetHeight
</span><span class="token prefix inserted">+</span><span class="token line">        this.$refs.list.scrollTop = scrollHeight - offsetHeight
</span><span class="token prefix inserted">+</span><span class="token line">      })
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><h2 id="第九章-项目收尾"><a href="#第九章-项目收尾" class="header-anchor">#</a> 第九章：项目收尾</h2> <h3 id="_01-刷新token"><a href="#_01-刷新token" class="header-anchor">#</a> 01-刷新token</h3> <blockquote><p>目的：无感延长token有效期</p></blockquote> <p>大致步骤：</p> <ul><li>登录完毕后台返回：token  1-2小时  refresh_token  30天，利用它可以让登录延续30天。</li> <li>理解使用 refresh_token 过程
<ul><li>vuex 本地存储  需要记录  refresh_token</li> <li>当你发<strong>请求</strong>的时候出现401，响应拦截器中</li> <li>拿着refresh_token向后台获取新的有效的token</li> <li>把本地的token更新成新的token</li> <li>继续发送之前失败的 <strong>请求</strong>  需要返回promise</li> <li>如果你用 refresh_token 去获取token的时候失败了，无效了，去登录</li></ul></li></ul> <p>落地代码：</p> <ul><li>存储refresh_token <code>src/store/modules/user.js</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>// 用户模块共享数据管理
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> namespaced: true,
</span><span class="token prefix unchanged"> </span><span class="token line"> // 状态
</span><span class="token prefix unchanged"> </span><span class="token line"> state () {
</span><span class="token prefix unchanged"> </span><span class="token line">   return {
</span><span class="token prefix unchanged"> </span><span class="token line">     // 令牌  初始化从本地获取
</span><span class="token prefix unchanged"> </span><span class="token line">     token: localStorage.getItem('geek-client-mobile-token'),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      refreshToken: localStorage.getItem('geek-client-mobile-refreshToken')
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> // 修改
</span><span class="token prefix unchanged"> </span><span class="token line"> mutations: {
</span><span class="token prefix unchanged"> </span><span class="token line">   setToken (state, token) {
</span><span class="token prefix unchanged"> </span><span class="token line">     // 1. 修改vuex的数据
</span><span class="token prefix unchanged"> </span><span class="token line">     state.token = token
</span><span class="token prefix unchanged"> </span><span class="token line">     // 2. 同步修改本地
</span><span class="token prefix unchanged"> </span><span class="token line">     localStorage.setItem('geek-client-mobile-token', token)
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    setRefreshToken (state, refreshToken) {
</span><span class="token prefix inserted">+</span><span class="token line">      // 1. 修改vuex的数据
</span><span class="token prefix inserted">+</span><span class="token line">      state.refreshToken = refreshToken
</span><span class="token prefix inserted">+</span><span class="token line">      // 2. 同步修改本地
</span><span class="token prefix inserted">+</span><span class="token line">      localStorage.setItem('geek-client-mobile-refreshToken', refreshToken)
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}

</code></pre></div><ul><li>刷新token的API  <code>src/api/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request<span class="token punctuation">,</span> <span class="token punctuation">{</span> baseURL <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 刷新token
 * @param {String} refreshToken - 保存的refresh_token
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">refreshTokenAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">refreshToken</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> baseURL <span class="token operator">+</span> <span class="token string">'v1_0/authorizations'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'put'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>refreshToken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>响应拦截器，调用API <code>src/utils/request.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> refreshTokenAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code>// 4. token失效处理
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">instance.interceptors.response.use(res =&gt; res, async err =&gt; {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // 1. 判断状态码401
</span><span class="token prefix unchanged"> </span><span class="token line"> // 2. 删除token
</span><span class="token prefix unchanged"> </span><span class="token line"> // 3. 跳转登录，当前路由的完整地址需要传递给登录页面。因为：将来登录完事需要回跳
</span><span class="token prefix unchanged"> </span><span class="token line"> if (err.response &amp;&amp; err.response.status === 401) {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // ★1. 使用refresh_token更新token不能使用instance，请求拦截器中会覆盖请求头
</span><span class="token prefix inserted">+</span><span class="token line">    const [err2, res] = await to(refreshTokenAPI(store.state.user.refreshToken))
</span><span class="token prefix inserted">+</span><span class="token line">    // ★2. 刷新token失败
</span><span class="token prefix inserted">+</span><span class="token line">    if (err2) {
</span><span class="token prefix inserted">+</span><span class="token line">      store.commit('user/setToken', '')
</span><span class="token prefix inserted">+</span><span class="token line">      // 组件：this.$route.path 路径  fullPath 完整路径，带参数的
</span><span class="token prefix inserted">+</span><span class="token line">      // 通过 router实例 获取当前路由信息对象 currentRoute
</span><span class="token prefix inserted">+</span><span class="token line">      // 回跳地址：/order?id=100&amp;name=tom  ===&gt; 跳转登录地址  /login?returnUrl=/order?id=100&amp;name=tom
</span><span class="token prefix inserted">+</span><span class="token line">      // 地址可能回出现特殊字符 &amp; 需要转换成url编码 encodeURIComponent
</span><span class="token prefix inserted">+</span><span class="token line">      // 转义后 /login?returnUrl=%2Forder%3Fid%3D100%26name%3Dtom
</span><span class="token prefix inserted">+</span><span class="token line">      router.push('/login?returnUrl=' + encodeURIComponent(router.currentRoute.fullPath))
</span><span class="token prefix inserted">+</span><span class="token line">    } else {
</span><span class="token prefix inserted">+</span><span class="token line">      // ★3. 刷新token成功
</span><span class="token prefix inserted">+</span><span class="token line">      store.commit('user/setToken', res.data.data.token)
</span><span class="token prefix inserted">+</span><span class="token line">      // ★4. 继续发送失败的请求，需要成功
</span><span class="token prefix inserted">+</span><span class="token line">      // err.config 是之前失败的请求配置
</span><span class="token prefix inserted">+</span><span class="token line">      return instance(err.config)
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span><span class="token prefix unchanged"> </span><span class="token line"> return Promise.reject(err)
</span></span>})
</code></pre></div><ul><li>推出登录 <code>src/views/user/profile/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }).then(() =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">       // 确认后退出
</span><span class="token prefix unchanged"> </span><span class="token line">       this.$store.commit('user/setToken', '')
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        this.$store.commit('user/setRefreshToken', '')
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       this.$router.push('/')
</span><span class="token prefix unchanged"> </span><span class="token line">     }).catch(e =&gt; {})
</span></span></code></pre></div><h3 id="_02-打包部署"><a href="#_02-打包部署" class="header-anchor">#</a> 02-打包部署</h3> <blockquote><p>目的：打包之后部署至服务器</p></blockquote> <p>大致步骤：</p> <ul><li>修改打包后资源引用为相对路径</li> <li>执行 npm run build 打包出资源</li> <li>上传到服务器，使用node托管</li></ul> <p>落地内容：</p> <ul><li>修改打包后资源引用为相对路径</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>// vue-cli的配置文件
module.exports = {
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  publicPath: './',
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> css: {
</span><span class="token prefix unchanged"> </span><span class="token line">   loaderOptions: {
</span><span class="token prefix unchanged"> </span><span class="token line">     less: {
</span><span class="token prefix unchanged"> </span><span class="token line">       // less 的全局变量
</span><span class="token prefix unchanged"> </span><span class="token line">       globalVars: {
</span><span class="token prefix unchanged"> </span><span class="token line">         'geek-color': '#FC6627',
</span><span class="token prefix unchanged"> </span><span class="token line">         'geek-gray-color': '#F7F8FA'
</span><span class="token prefix unchanged"> </span><span class="token line">       }
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><ul><li>执行 npm run build 打包出资源</li></ul> <p><img src="/geek-document/assets/img/1627469626360.0d1c0165.png" alt="1627469626360"></p> <ul><li>上传到服务器，使用node托管
<ul><li>将来工作中一般只需要把你打包的资源给后台或者运维即可，托管的服务器也不一定是node。</li></ul></li></ul> <h3 id="_03-项目总结"><a href="#_03-项目总结" class="header-anchor">#</a> 03-项目总结</h3> <blockquote><p>目的：掌握项目技术解决方案，业务解决方案。</p></blockquote> <ul><li>能够使用vant组件库构建移动界面</li> <li>能够使用 postcss-px-to-viewport 完成移动端适配</li> <li>能够使用 命名视图 完成页面局部内容复用</li> <li>能够使用 svg 方式的多色字体图标</li> <li>能够封装 request 请求工具</li> <li>能够使用 await-to-js 处理await代码异常</li> <li>能够使用 token 完成用户鉴权</li> <li>能够实现 移动端 上拉加载下拉刷新效果</li> <li>能够实现 移动端 骨架效果</li> <li>能够使用 dayjs 处理时间</li> <li>能够使用 keep-alive 针对某组件缓存</li> <li>能够实现 列表滚动位置记忆功能</li> <li>能够使用 highlight.js 对富文本代码 高亮功能</li> <li>能够实现 本地与线上 频道管理</li> <li>能够实现 评论与回复 功能</li> <li>能够使用 socket.io-client 完成双向通讯</li> <li>能够掌握 用户无感 刷新token</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/geek-document/assets/js/app.0842bb1d.js" defer></script><script src="/geek-document/assets/js/3.81450f90.js" defer></script><script src="/geek-document/assets/js/4.9f5882eb.js" defer></script>
  </body>
</html>
